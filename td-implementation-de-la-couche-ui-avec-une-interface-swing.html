
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas">
      
      
        <meta name="author" content="Serge Tahé">
      
      
        <link rel="canonical" href="https://stahe.github.io/java-spring-dec-2015/td-implementation-de-la-couche-ui-avec-une-interface-swing.html">
      
      
        <link rel="prev" href="td-implementation-de-la-couche-ui-avec-un-programme-console.html">
      
      
        <link rel="next" href="cours-gestion-des-bases-de-donnees-relationnelles-avec-spring-data.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>10. [TD] : Implémentation de la couche [ui] avec une interface Swing - Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/focus.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#10-td-implementation-de-la-couche-ui-avec-une-interface-swing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Introduction au langage Java et à l&#39;écosystème Spring au travers d&#39;une étude de cas" class="md-header__button md-logo" aria-label="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              10. [TD] : Implémentation de la couche [ui] avec une interface Swing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Passer au mode sombre"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Passer au mode sombre" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Passer au mode clair"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Passer au mode clair" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/stahe/java-spring-dec-2015" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Introduction au langage Java et à l&#39;écosystème Spring au travers d&#39;une étude de cas" class="md-nav__button md-logo" aria-label="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stahe/java-spring-dec-2015" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-le-probleme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. [TD] : Le problème
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-classes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. [TD] : Classes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-architectures-en-couches.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. [TD] : Architectures en couches
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-introduction-au-framework-spring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. [Cours] : Introduction au framework Spring
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-introduction-a-lapi-jdbc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. [Cours] : Introduction à l'API JDBC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-dao-du-td-avec-lapi-jdbc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7. [TD] : Implémentation de la couche [DAO] du TD avec l'API JDBC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-la-couche-metier.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. [TD] : La couche [metier]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-ui-avec-un-programme-console.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9. [TD] : Implémentation de la couche [ui] avec un programme console
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    10. [TD] : Implémentation de la couche [ui] avec une interface Swing
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="td-implementation-de-la-couche-ui-avec-une-interface-swing.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    10. [TD] : Implémentation de la couche [ui] avec une interface Swing
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#101-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1. Support
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#102-fonctionnement-de-lapplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2. Fonctionnement de l'application
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#103-la-classe-electionsswing-dimplementation-de-la-couche-ui" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3. La classe [ElectionsSwing] d'implémentation de la couche [ui]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.3. La classe [ElectionsSwing] d&#39;implémentation de la couche [ui]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1031-le-projet-netbeans" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.1. Le projet Netbeans
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1032-configuration-maven" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.2. Configuration Maven
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1033-construction-de-linterface-graphique" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.3. Construction de l'interface graphique
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1034-separation-du-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.4. Séparation du code
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1035-implementation-de-linterface-ielectionsui" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.5. Implémentation de l'interface [IElectionsUI]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1036-la-classe-executable" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.6. La classe exécutable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1037-initialisation-de-linterface-graphique" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.7. Initialisation de l'interface graphique
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1038-la-classe-utilitaires" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.8. La classe [Utilitaires]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1039-le-code-de-la-classe-electionsswing" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9. Le code de la classe [ElectionsSwing]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.3.9. Le code de la classe [ElectionsSwing]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#10391-la-methode-init" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.1. La méthode [init]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10392-gerer-letat-du-lien-ajouter" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.2. Gérer l'état du lien [Ajouter]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10393-affecter-les-voix-a-chaque-liste" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.3. Affecter les voix à chaque liste
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10394-gerer-letat-du-lien-supprimer" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.4. Gérer l'état du lien [Supprimer]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10395-supprimer-une-liste-candidate" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.5. Supprimer une liste candidate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10396-gerer-letat-du-lien-calculer" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.6. Gérer l'état du lien [Calculer]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10397-calculer-les-sieges" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.7. Calculer les sièges
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10398-enregistrer-les-resultats-dans-la-source-de-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.8. Enregistrer les résultats dans la source de données
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10399-effacer-les-resultats" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.9.9. Effacer les résultats
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10310-ameliorations" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3.10. Améliorations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-gestion-des-bases-de-donnees-relationnelles-avec-spring-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11. [Cours] : Gestion des bases de données relationnelles avec Spring Data
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-dao-du-td-avec-spring-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    12. [TD] : Implémentation de la couche [DAO] du TD avec [Spring Data]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-exposer-une-base-de-donnees-sur-le-web-avec-spring-mvc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    13. [Cours] : Exposer une base de données sur le web avec Spring MVC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-exposition-sur-le-web-de-la-couche-metier.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    14. [TD] : Exposition sur le web de la couche [metier]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-creation-dun-client-pour-le-service-web.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    15. [TD] : création d'un client pour le service web
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-securiser-lacces-a-un-service-web-avec-spring-security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    16. [Cours] : Sécuriser l'accès à un service web avec Spring Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-securisation-du-serveur-web--json-des-elections.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    17. [TD] : sécurisation du serveur web / jSON des élections
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-gestion-des-acces-inter-domaines.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    18. [Cours] : Gestion des accès inter-domaines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-elections-avec-des-requetes-inter-domaines.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    19. [TD] Elections avec des requêtes inter-domaines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="programmation-asynchrone-avec-rxjava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    20. Programmation asynchrone avec RxJava
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="conclusion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    21. Conclusion
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="annexes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    22. Annexes
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="10-td-implementation-de-la-couche-ui-avec-une-interface-swing">10. [TD] : Implémentation de la couche [ui] avec une interface Swing</h1>
<p><strong>Mots clés</strong> : architecture multicouche, Spring, injection de dépendances, bibliothèque de composants Swing.</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000051B000000FD768FBF48.png" style="display:inline-block; margin:4px;width:17.291cm;height:3.348cm;" /></td></tr></table>

<h2 id="101-support">10.1. Support</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000578000001AE3C23F928.png" style="display:inline-block; margin:4px;width:17.999cm;height:5.528cm;" /></td></tr></table>

<p>Dans la couche [UI], on veut construire une interface graphique Swing. Netbeans a un outil [Matisse] pour construire ces interfaces Swing qui est supérieur à ce que peut proposer Eclipse. Les interfaces Swing tendent à être remplacées par des interfaces JavaFx. Netbeans et Eclipse utilisent le même outil pour construire ces dernières. Si donc, on construit des  interfaces JavaFx, on peut garder Eclipse de bout en bout de l'architecture en couches.</p>
<p>Netbeans peut ouvrir n'importe quel projet Maven. On va donc utiliser le projet Maven précédent et lui ajouter une interface Swing. En [2], on charge (File / Open project) les projets Maven des trois couches que nous avons construites avec Eclipse. Puis, on construit leurs binaires [3]. Les options [Build] et [Clean and Build] construisent le binaire du prjet sur lequel elles sont appliquées. Ces binaires sont placés dans le dossier [target] [4-5] du projet :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001BB000001BC4D20CB45.png" style="display:inline-block; margin:4px;width:5.861cm;height:5.874cm;" /></td></tr></table>

<p>L'option [Clean] supprime ce dossier [target]. L'option [Build] le reconstruit. L'expérience montre que lorsqu'on rencontre des problèmes inattendus, la première chose à faire est un [Clean and Build] sur le projet pour être sûr qu'on travaille bien avec la dernière version de celui-ci. C'est notamment nécessaire lorsqu'on a des fichiers de configuration qui s'ils sont modifiés ne provoquent pas une recompilation automatique lorsqu'on exécute le projet. Il faut alors forcer cette recompilation par un [Clean and Build] pour que leurs nouvelles versions soient installées dans le dossier [target].</p>
<h2 id="102-fonctionnement-de-lapplication">10.2. Fonctionnement de l'application</h2>
<p>Revenons à l'architecture globale de l'application [Elections] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004BB000000FF2B1C6207.png" style="display:inline-block; margin:4px;width:16.021cm;height:3.374cm;" /></td></tr></table>

<p>Nous nous intéressons maintenant à une nouvelle implémentation de la couche [ui]. L'unique implémentation réalisée pour le moment est une interface console. Nous créons maintenant une interface graphique.</p>
<p>L'utilisateur disposera de l'interface suivante pour interagir avec l'application [Elections] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000003A90000035363325D82.png" style="display:inline-block; margin:4px;width:12.397cm;height:11.259cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001C0000001A0CEDB96B1.png" style="display:inline-block; margin:4px;width:9.479cm;height:8.811cm;" /></td></tr></table>

<p>L'interface graphique se trouve dans la couche [ui]. C'est elle qui interagit avec l'utilisateur.</p>
<ul>
<li>au démarrage, l'application console [<strong>main</strong>] instancie les trois couches de l'application grâce à Spring. Ceci est fait avant même que l'interface graphique ne soit visible. Toujours dans cette phase d'initialisation, les renseignements caractérisant l'élection (nombre de sièges à pourvoir, seuil électoral, listes en compétition) sont demandés à la couche [dao]. Si cette phase d'initialisation échoue (impossibilité d'accéder aux données par exemple), un message d'erreur est affiché sur la console et l'interface graphique n'est pas affichée.</li>
<li>si la lecture des données s'est bien passée, l'interface graphique est affichée avec les renseignements suivants (cf copie d'écran plus haut) :</li>
<li>le nombre de sièges à pourvoir dans (2)</li>
<li>le seuil électoral dans (3)</li>
<li>les identifiants et noms des listes candidates dans (4)</li>
<li>l'utilisateur affecte alors à chaque liste candidate son nombre de voix à l'aide des champs 4 (id - nom), 5 (voix), 6 (pour ajouter).</li>
</ul>
<p><img src="images/10000000000001AC000000775D50E179.png" style="width:9.059cm;height:2.521cm;" alt="Image" /></p>
<ul>
<li>on peut alors utiliser le lien (10) pour calculer les sièges :</li>
</ul>
<p><img src="images/10000000000000BF0000006B6F7C0BD3.png" style="width:3.54cm;height:1.981cm;" alt="Image" /></p>
<ul>
<li>le lien [Enregistrer] (12) permet d'enregistrer les résultats dans la source de données.</li>
</ul>
<h2 id="103-la-classe-electionsswing-dimplementation-de-la-couche-ui">10.3. La classe [ElectionsSwing] d'implémentation de la couche [ui]</h2>
<h3 id="1031-le-projet-netbeans">10.3.1. Le projet Netbeans</h3>
<p><strong>Note</strong> : Le paragraphe 22.4, page 419, indique comment se procurer Netbeans. </p>
<p>Le projet Netbeans final de l'application aura la forme suivante [1]. Construisez-le en suivant les étape [2-5] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005AF000001E776D49C18.png" style="display:inline-block; margin:4px;width:17.999cm;height:6.024cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000245000001A2D2801BB9.png" style="display:inline-block; margin:4px;width:7.687cm;height:5.53cm;" /></td></tr></table>

<p>On s'assurera que le projet est configuré pour être compilé par un JDK 1.8 [1-6] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005980000048CDB9BF98C.png" style="display:inline-block; margin:4px;width:17.999cm;height:14.63cm;" /></td></tr></table>

<h3 id="1032-configuration-maven">10.3.2. Configuration Maven</h3>
<p>Le nouveau projet [elections-swing-metier-dao-jdbc] va s'appuyer sur le précédent projet [elections-console-metier-dao-jdbc]. Pour cela, on ajoute une dépendance Maven de la façon suivante [1-3] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000700000002C8B7BB149D.png" style="display:inline-block; margin:4px;width:17.999cm;height:7.151cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000022A0000019CCFCECBD1.png" style="display:inline-block; margin:4px;width:7.329cm;height:5.45cm;" /></td></tr></table>

<h3 id="1033-construction-de-linterface-graphique">10.3.3. Construction de l'interface graphique</h3>
<p>Pour créer l'interface graphique, nous pouvons procéder comme suit :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000037100000158A562DFA9.png" style="display:inline-block; margin:4px;width:11.656cm;height:4.551cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000002B1000001E0D373F464.png" style="display:inline-block; margin:4px;width:9.116cm;height:6.35cm;" /></td></tr></table>

<ul>
<li>[1] : ajout d'un objet au paquetage [elections.ui.service]</li>
<li>[2] : choix de l'option [JFrame Form] dans la catégorie [Swing GUI Forms]</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004F60000017F755E9FA4.png" style="display:inline-block; margin:4px;width:16.801cm;height:5.068cm;" /></td></tr></table>

<ul>
<li>[4] : donner un nom à la classe</li>
<li>[5] : le package de la classe.</li>
<li>Terminer l'assistant.</li>
<li>[6] : la classe générée</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000054E00000126B251AB47.png" style="display:inline-block; margin:4px;width:17.965cm;height:3.889cm;" /></td></tr></table>

<ul>
<li>[7] : la classe [AbstractElectionsSwing] en mode [Design]</li>
<li>[8] : l'onglet [Navigator] qui affiche l'arbre [9] des composants de la fenêtre</li>
<li>[10] : l'onglet [Properties] qui affiche les propriétés du composant [jFrame] sélectionné en [9]</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000028E0000012158B404C5.png" style="display:inline-block; margin:4px;width:8.652cm;height:3.824cm;" /></td></tr></table>

<ul>
<li>[11] : [JFrame] est un conteneur de composants. Ceux-ci peuvent être disposés dans le conteneur selon diverses règles de positionnement appelées layouts. Ici, nous choisissons le layout [Free Design] [14] qui permet de positionner des composants de façon libre dans le conteneur.</li>
</ul>
<p>Nous trouvons les composants dans la barre d'outils appelée Palette :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000594000001925C114E9C.png" style="display:inline-block; margin:4px;width:17.999cm;height:5.066cm;" /></td></tr></table>

<ul>
<li>[1] : la palette</li>
<li>[2] : un composant JLabel est déposé dans le conteneur de composants</li>
<li>avec un clic droit dessus, on a accès à diverses propriétés : son nom [4], son texte [3] ou bien ses gestionnaires d'événements [5]. Nous utilisons [3] pour fixer le texte [6].</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000252000001F4BB8FBB0F.png" style="display:inline-block; margin:4px;width:7.858cm;height:6.615cm;" /></td></tr></table>

<ul>
<li>[1] : l'onglet [Properties] du composant [JLabel] donne accès aux propriétés de celui-ci : son positionnement horizontal [2], vertical [3], la police de caractères du texte [4], le texte [5].</li>
</ul>
<p>Lorsqu'un composant est déposé et configuré sur l'interface graphique et qu'on sauvegarde (Ctrl-S) le travail fait, du code est généré dans la classe [AbstractElectionsSwing] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000264000000CF3DE1D0AD.png" style="display:inline-block; margin:4px;width:11.329cm;height:3.829cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000002850000010FB89AC9E7.png" style="display:inline-block; margin:4px;width:11.94cm;height:5.02cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Il ne faut pas modifier ce code grisé car il est supprimé et régénéré lors de la sauvegarde suivante. Les modifications faites seraient alors perdues.</p>
<p>On trouvera un tutoriel de création d'une interface graphique avec Netbeans à l'URL [<a href="https://netbeans.org/kb/docs/java/quickstart-gui.html?print=yes#design"><u>https://netbeans.org/kb/docs/java/quickstart-gui.html?print=yes#design</u></a>] (novembre 2015).</p>
<p>Nous construisons maintenant l'interface suivante :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000394000003415B3742BA.png" style="display:inline-block; margin:4px;width:12.118cm;height:11.021cm;" /></td></tr></table>

<p>Les composants de l'interface sont les suivants :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>n°</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>type</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>nom</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>rôle</b></p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>1
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JMenuBar</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jMenuBar1</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">un menu</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>2
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelSAP</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">le nombre de sièges à pourvoir</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>3
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelSE</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">le seuil électoral</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>4
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JComboBox</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jComboBoxNomsListes</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">liste des noms des listes en compétition</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>5
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JTextField</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jTextFieldVoixListe</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">le nombre de voix d'une liste</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>6
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelAjouter</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour ajouter une liste à (8)</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>7,8
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">(JScrollPane, JList)</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jListNomsVoix</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">les noms et voix des listes</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>9
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelSupprimer</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour supprimer de (8) la liste sélectionnée dans (8)</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>10
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelCalculer</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour calculer les résultats de l'élection</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>11
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelEffacer</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour effacer les résultats de l'élection</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>12
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">JLabel</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jLabelEnregistrer</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour enregistrer les résultats de l'élection</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>13,14
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">(JScrollPane, JList)</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jListResultats</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour afficher les résultats de l'élection</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><div markdown="block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>15,16
</code></pre></div></td></tr></table></div>
</div></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">(JScrollPane,</p><p style="margin:0;">JTextPane)</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">jTextPaneMessages</p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">pour afficher des messages de suivi</p></td></tr></table>

<p>L'annotation (JScrollPane, JList) [13-14] est là pour indiquer que lorsqu'on dépose un composant [JList] dans la fenêtre, il est automatiquement inséré dans un composant [JScrollPane] qui permet le défilement de la liste. C'est le composant [JScrollPane] qui permet de voir tous les éléments de la liste alors que seul un nombre restreint d'entre-eux n'est visible à un moment donné. Il en est de même pour le composant [JTextPane] [15-16].</p>
<p>Le menu pourra être créé de la façon suivante :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000059F00000189AD148B2E.png" style="display:inline-block; margin:4px;width:17.999cm;height:4.916cm;" /></td></tr></table>

<ul>
<li>[1, 2] : un composant [Menu Bar] est déposé sur la fenêtre</li>
<li>[3] : le menu généré par défaut tel que présenté dans l'onglet [Navigator]</li>
<li>[4,5,6] : par un clic droit sur une option de menu, on peut :</li>
<li>changer son texte [4], son nom [5]</li>
<li>gérer ses événements [6]</li>
<li>[7] : le menu souhaité</li>
</ul>
<p>Le menu désiré est le suivant :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>niveau 1</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">niveau 2</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>Elections</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Quitter</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>Listes</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Ajouter</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Supprimer</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>Résultats</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Calculer</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Effacer</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;">Enregistrer</p></td></tr><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><p style="margin:0;"><b>A propos</b></p></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>On peut tester l'interface graphique à tout moment :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000113000000618FF501BE.png" style="display:inline-block; margin:4px;width:5.091cm;height:1.799cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Lors de la construction de l'interface, il faut associer un gestionnaire d'événement sur certains labels et menus [Ajouter, Effacer, ...]. Voici comment faire :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004F50000020F1187B4BD.png" style="display:inline-block; margin:4px;width:16.789cm;height:6.973cm;" /></td></tr></table>

<ul>
<li>[1] : cliquer droit sur le composant dont on veut gérer un événement</li>
<li>[2] : choisir l'option [Events]</li>
<li>[3] : choisir une catégorie d'événements</li>
<li>[4] : choisir l'événement qu'on veut gérer</li>
</ul>
<p>Le code Java généré par cette opération est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="w">    </span><span class="n">jLabelCalculer</span><span class="p">.</span><span class="na">addMouseListener</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseAdapter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">      </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">mouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">        </span><span class="n">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">evt</span><span class="p">);</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="p">...</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="c1">// TODO add your handling code here:</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 1-5 : un gestionnaire d'événement est ajouté au composant jLabelCalculer. La méthode <strong>addMouseListener</strong> attend comme paramètre une classe implémentant l'interface <strong>MouseListener</strong> suivante :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001FC0000012674E252F1.png" style="display:inline-block; margin:4px;width:8.64cm;height:4.999cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>L'interface MouseListener est implémentée par différentes classes dont la classe MouseAdapter. Celle-ci implémente les cinq méthodes de l'interface MouseListener mais ces méthodes ne font rien. Aussi faut-il dériver cette classe pour implémenter la ou les méthodes de son choix. Ce qui est fait dans le code ci-dessus et repris ci-dessous :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a>    jLabelCalculer.addMouseListener(new java.awt.event.MouseAdapter() {
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>      public void mouseClicked(java.awt.event.MouseEvent evt) {
<a id="__codelineno-14-3" name="__codelineno-14-3"></a>        jLabelCalculerMouseClicked(evt);
<a id="__codelineno-14-4" name="__codelineno-14-4"></a>      }
<a id="__codelineno-14-5" name="__codelineno-14-5"></a>});
</code></pre></div></td></tr></table></div>
<p>Le code ci-dessus utilise la technique de la classe anonyme exposée au paragraphe 2.5 du cours [<a href="http://tahe.developpez.com/java/cours"><u>ref1</u></a>].</p>
<p>Ligne 1, le paramètre de la méthode addMouseListener est une classe anonyme, définie à la volée. C'est une instance d'une classe dérivée de la classe MouseAdapter (ligne 1) dont on redéfinit la méthode mouseClicked (lignes 2-4) afin qu'elle fasse quelque chose.</p>
<p>La méthode jLabelCalculerMouseClicked appelée ligne 3 est définie comme suit :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="c1">// TODO add your handling code here:</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Le développeur gère l'événement "MouseClicked" en mettant du code dans cette méthode.</p>
<p>Tous les gestionnaires d'événements sont générés par Netbeans de cette façon. Le développeur peut ignorer les lignes de code générées par Netbeans pour associer une méthode à un événement d'un composant. Il peut se contenter de mettre son code en ligne 2 ci-dessus. Voici un exemple :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Mouse Clicked&quot;</span><span class="p">);</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Si on exécute l'interface graphique et qu'on clique sur le lien [Calculer] on obtient un message sur la console :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004E0000000A3C39FEEDD.png" style="display:inline-block; margin:4px;width:16.51cm;height:2.157cm;" /></td></tr></table>

<ul>
<li>[1] : on clique deux fois sur le label [Calculer]</li>
<li>[2] : le gestionnaire de cet événement a été exécuté et a produit les messages mouseClicked dans la console de Netbeans.</li>
</ul>
<p>Les composants [jComboBoxNomsListes, jListNomsVoix, jListResultats] sont déclarés de la façon suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a>protected javax.swing.JComboBox jComboBoxNomsListes;
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>protected javax.swing.JList jListNomsVoix;
<a id="__codelineno-17-3" name="__codelineno-17-3"></a>protected javax.swing.JList jListResultats;
</code></pre></div></td></tr></table></div>
<p>Ces composants sont des listes qui normalement sont paramétrées par un type T : le type des éléments du modèle affiché par les composants. Ce type T, peut être quelconque. La valeur affichée dans le composant liste est de type [String]. Par défaut, c'est alors la méthode [T.toString()] qui est utilisée pour l'affichage. Afin de mieux maîtriser ce qui sera affiché, le type T sera ici le type String. Aussi, la déclaration correcte de nos listes est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a>protected javax.swing.JComboBox&lt;String&gt; jComboBoxNomsListes;
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>protected javax.swing.JList&lt;String&gt; jListNomsVoix;
<a id="__codelineno-18-3" name="__codelineno-18-3"></a>protected javax.swing.JList&lt;String&gt; jListResultats;
</code></pre></div></td></tr></table></div>
<p>On obtient ce résultat en modifiant l'une des propriétés du composant :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001E40000010AD78B4217.png" style="display:inline-block; margin:4px;width:6.403cm;height:3.519cm;" /></td></tr></table>

<h3 id="1034-separation-du-code">10.3.4. Séparation du code</h3>
<p>Revenons à la structure de notre application :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004BE000000FD68310DE1.png" style="display:inline-block; margin:4px;width:16.06cm;height:3.348cm;" /></td></tr></table>

<p>La classe [AbstractElectionsSwing] doit implémenter la couche [ui] ci-dessus. Son code généré par Netbeans ne contient pour l'instant que du code de gestion de la fenêtre et des gestionnaires d'événement qui pour l'instant ne font rien. Ci-dessus, on voit que la classe [AbstractElectionsSwing] devra gérer des échanges avec la couche [métier]. Cette gestion se fera dans les gestionnaires d'événement. Pour clarifier la structure du code, on décide de le placer dans deux classes :</p>
<ul>
<li>[AbstractElectionsSwing] qui restera comme elle a été générée par Netbeans à quelques détails près. Cette classe ne gèrera aucun événement elle-même. Les gestionnaires d'événements seront vides et déclarés abstraits. Ils seront implémentés par une classe dérivée de [AbstractElectionsSwing].</li>
<li>[ElectionsSwing], classe dérivée de [AbstractElectionsSwing] qui implémentera tous les gestionnaires d'événement.</li>
</ul>
<p>Ce type de séparation n'est pas inhabituel. On le trouve par exemple dans les pages web ASP.NET (version non MVC). Le projet Netbeans évolue comme suit :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000108000000B031B76F2A.png" style="display:inline-block; margin:4px;width:4.89cm;height:3.26cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Le code de la classe [AbstractElectionsSwing] lui, évolue de la façon suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AbstractElectionsSwing</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">....</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jMenuItemCalculerActionPerformed</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">ActionEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">        </span><span class="n">doCalculer</span><span class="p">();</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="p">...</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">jLabelCalculer</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">            </span><span class="n">doCalculer</span><span class="p">();</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="p">....</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">    </span><span class="c1">// gestionnaires d&#39;événements</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doSupprimer</span><span class="p">();</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doCalculer</span><span class="p">();</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doQuitter</span><span class="p">();</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEffacer</span><span class="p">();</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEnregistrer</span><span class="p">();</span>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doAjouter</span><span class="p">();</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doInformer</span><span class="p">();</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a>
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelAjouter</span><span class="p">();</span>
<a id="__codelineno-19-32" name="__codelineno-19-32"></a>
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelSupprimer</span><span class="p">();</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="p">...</span>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 1 : la classe est déclarée <strong>abstraite</strong></li>
<li>lignes 3-5 : gestion du clic sur sur l'option de menu [jMenuItemCalculer]. On voit que le traitement de l'événement est déporté sur la méthode doCalculer de la ligne 19. Cette méthode n'est pas implémentée et est déclarée abstraite. C'est la classe dérivée [ElectionsSwing] qui l'implémentera ;</li>
<li>lignes 9-13 : le gestionnaire de l'événement clic sur le label [jLabelCalculer]. Le clic provoque toujours un événement, que le composant [jLabel] soit actif (enabled=true) ou inactif (enabled=false). On s'assure ici qu'il est bien actif pour traiter l'événement ;</li>
<li>lignes 15 et au-delà : cette technique de délégation du traitement des événements vers une méthode abstraite est apliquée à tous les gestionnaires d'événements.</li>
</ul>
<p>La classe [ElectionsSwing] dérivée de [AbstractElectionsSwing] implémente tous les gestionnaires d'événements non implémentés par [AbstractElectionsSwing] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span>
<span class="normal"><a href="#__codelineno-20-34">34</a></span>
<span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span>
<span class="normal"><a href="#__codelineno-20-47">47</a></span>
<span class="normal"><a href="#__codelineno-20-48">48</a></span>
<span class="normal"><a href="#__codelineno-20-49">49</a></span>
<span class="normal"><a href="#__codelineno-20-50">50</a></span>
<span class="normal"><a href="#__codelineno-20-51">51</a></span>
<span class="normal"><a href="#__codelineno-20-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.ui.service</span><span class="p">;;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="p">...</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ElectionsSwing</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractElectionsSwing</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="c1">// gestionnaires d&#39;évts</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doInformer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="p">...</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doAjouter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doCalculer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEffacer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEnregistrer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="p">...</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doQuitter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doSupprimer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a><span class="p">...</span>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelAjouter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="p">...</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-46" name="__codelineno-20-46"></a>
<a id="__codelineno-20-47" name="__codelineno-20-47"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-20-48" name="__codelineno-20-48"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelSupprimer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-49" name="__codelineno-20-49"></a><span class="p">...</span>
<a id="__codelineno-20-50" name="__codelineno-20-50"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-51" name="__codelineno-20-51"></a>
<a id="__codelineno-20-52" name="__codelineno-20-52"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 3 : [ElectionsSwing] dérive de [AbstractElectionsSwing]</li>
<li>lignes 7-50 : les gestionnaires des événements de la fenêtre graphique</li>
</ul>
<p>Les méthodes de la classe dérivée [ElectionsSwing] vont manipuler les composants de la classe parent [AbstractElectionsSwing]. Actuellement ces composants ont une portée private, interdisant à la classe fille [ElectionsSwing] d'y avoir accès :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a>private JMenuItem jMenuItemAPropos = null;
<a id="__codelineno-21-2" name="__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a>private JLabel jLabelAjouter = null;
</code></pre></div></td></tr></table></div>
<p>Pour résoudre ce problème, on fera en sorte que la portée des composants de l'interface graphique soit [<strong>protected</strong>] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000057B0000019C18CB4098.png" style="display:inline-block; margin:4px;width:17.999cm;height:5.285cm;" /></td></tr></table>

<ul>
<li>mettre en [3], l'attribut [protected] ;</li>
</ul>
<h3 id="1035-implementation-de-linterface-ielectionsui">10.3.5. Implémentation de l'interface [IElectionsUI]</h3>
<p>Revenons à la structure de notre application :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004AF000000FEFC7607C9.png" style="display:inline-block; margin:4px;width:15.863cm;height:3.36cm;" /></td></tr></table>

<p>Ci-dessus la couche [ui] doit présenter l'interface [IElectionsUI] à l'objet [main] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span>
<span class="normal"><a href="#__codelineno-22-7">7</a></span>
<span class="normal"><a href="#__codelineno-22-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.ui.service</span><span class="p">;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IElectionsUI</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="cm">     * lance le dialogue avec l&#39;utilisateur</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="cm">     */</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">();</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Cette interface a été définie dans le projet [elections-console-metier-dao-jdbc] et décrite au paragraphe 9.4, page 135. Comme ce projet est une dépendance du projet [swing], cette interface est connue.</p>
<p>Parce que la classe [AbstractElectionsSwing] est devenue abstraite, elle ne peut plus être instanciée par Spring. C'est la classe [ElectionsSwing] qui doit désormais l'être. La classe [ElectionsSwing] doit implémenter l'interface [IElectionsUI]. Son code évolue donc comme suit :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span>
<span class="normal"><a href="#__codelineno-23-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a>public class ElectionsSwing extends AbstractElectionsSwing implements IElectionsUI {
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a>    // méthode run de l&#39;interface [ElectionsUI]
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>    public void run() {
<a id="__codelineno-23-5" name="__codelineno-23-5"></a>...
<a id="__codelineno-23-6" name="__codelineno-23-6"></a>    }
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 1 : la classe [ElectionsSwing] implémente l'interface [IElectionsUI]</li>
<li>lignes 4-6 : la méthode [run] de cette interface</li>
</ul>
<p>Que doit faire la méthode run ? Afficher la fenêtre graphique. Comment fait-on cela ? On peut se laisser guider par la méthode [main] qu'à générée Netbeans dans la classe [AbstractElectionsSwing] et qui fait ce qui est souhaité :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span>
<span class="normal"><a href="#__codelineno-24-25">25</a></span>
<span class="normal"><a href="#__codelineno-24-26">26</a></span>
<span class="normal"><a href="#__codelineno-24-27">27</a></span>
<span class="normal"><a href="#__codelineno-24-28">28</a></span>
<span class="normal"><a href="#__codelineno-24-29">29</a></span>
<span class="normal"><a href="#__codelineno-24-30">30</a></span>
<span class="normal"><a href="#__codelineno-24-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">args</span><span class="o">[]</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">    </span><span class="cm">/* Set the Nimbus look and feel */</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="c1">//&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="cm">/* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="cm">         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html </span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="cm">     */</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">UIManager</span><span class="p">.</span><span class="na">LookAndFeelInfo</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">UIManager</span><span class="p">.</span><span class="na">getInstalledLookAndFeels</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;Nimbus&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="na">getName</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="w">          </span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">UIManager</span><span class="p">.</span><span class="na">setLookAndFeel</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="na">getClassName</span><span class="p">());</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">          </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">      </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">NewJFrame</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">log</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Level</span><span class="p">.</span><span class="na">SEVERE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">ex</span><span class="p">);</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InstantiationException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="w">      </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">NewJFrame</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">log</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Level</span><span class="p">.</span><span class="na">SEVERE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">ex</span><span class="p">);</span>
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="w">      </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">NewJFrame</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">log</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Level</span><span class="p">.</span><span class="na">SEVERE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">ex</span><span class="p">);</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">UnsupportedLookAndFeelException</span><span class="w"> </span><span class="n">ex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="w">      </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Logger</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">NewJFrame</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">()).</span><span class="na">log</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">logging</span><span class="p">.</span><span class="na">Level</span><span class="p">.</span><span class="na">SEVERE</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">ex</span><span class="p">);</span>
<a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="w">    </span><span class="c1">//&lt;/editor-fold&gt;</span>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a>
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><span class="w">    </span><span class="cm">/* Create and display the form */</span>
<a id="__codelineno-24-26" name="__codelineno-24-26"></a><span class="w">    </span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">EventQueue</span><span class="p">.</span><span class="na">invokeLater</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><span class="w">      </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-28" name="__codelineno-24-28"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">NewJFrame</span><span class="p">().</span><span class="na">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-24-29" name="__codelineno-24-29"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-24-30" name="__codelineno-24-30"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-24-31" name="__codelineno-24-31"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Le constructeur [AbstractElectionsSwing] utilisé ligne 28 est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a>  public AbstractElectionsSwing() {
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>    initComponents();
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>}
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 2 : la méthode [initComponents] est une méthode privée générée par le générateur de l'interface graphique. On ne peut changer son code.</li>
</ul>
<p>La méthode [run] de la classe [ElectionsSwing] pourrait alors être la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a>  @Override
<a id="__codelineno-26-2" name="__codelineno-26-2"></a>  public void run() {
<a id="__codelineno-26-3" name="__codelineno-26-3"></a>    // on affiche l&#39;interface graphique
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>    SwingUtilities.invokeLater(new Runnable() {
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>      public void run() {
<a id="__codelineno-26-6" name="__codelineno-26-6"></a>        init();
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>        setVisible(true);
<a id="__codelineno-26-8" name="__codelineno-26-8"></a>      }
<a id="__codelineno-26-9" name="__codelineno-26-9"></a>    });
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>}
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 6 : l'interface graphique est initialisée au moyen d'une méthode [init]. Ici, on voudrait appeler la méthode [initComponents] de la classe parent, mais celle-ci est privée. On ajoute alors dans la classe parent [AbstractElectionsSwing], la méthode [init] suivante :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a>  protected void init(){
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>    initComponents();
<a id="__codelineno-27-3" name="__codelineno-27-3"></a>}
</code></pre></div></td></tr></table></div>
<ul>
<li>parce qu'elle est dans la classe [AbstractElectionsSwing], la méthode [init] a accès à la méthode privée [initComponents] de la même classe ;</li>
<li>parce qu'elle a l'attribut [protected], elle est visible dans la classe fille [ElectionsSwing] ;</li>
<li>ligne 7 : l'interface graphique est rendue visible ;</li>
</ul>
<p><strong>Note</strong> : lorsque la méthode [run] a été écrite dans la classe [ElectionsSwing], la méthode [main] de la classe abstraite [AbstractElectionsSwing] peut être supprimée.</p>
<h3 id="1036-la-classe-executable">10.3.6. La classe exécutable</h3>
<p>Revenons à la structure de notre application :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004B10000010765176D5C.png" style="display:inline-block; margin:4px;width:15.889cm;height:3.48cm;" /></td></tr></table>

<p>Nous voudrions que Spring instancie la couche [ui] comme il a été fait lorsque celle-ci était implémentée par une application console. Pour cela, il faut que la classe d'implémentation [ElectionsSwing] ait une référence sur la couche [métier] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span>
<span class="normal"><a href="#__codelineno-28-6">6</a></span>
<span class="normal"><a href="#__codelineno-28-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a>@Component
<a id="__codelineno-28-2" name="__codelineno-28-2"></a>public class ElectionsSwing extends AbstractElectionsSwing implements IElectionsUI{
<a id="__codelineno-28-3" name="__codelineno-28-3"></a>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>  // référence sur la couche [métier]
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>  @Autowired
<a id="__codelineno-28-6" name="__codelineno-28-6"></a>  private IElectionsMetier metier;
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>...
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 1 : la classe [ElectionsSwing] est un composant Spring ;</li>
<li>lignes 5-6 : injection par Spring d'une référence sur la couche [métier] ;</li>
</ul>
<p>L'interface graphique est lancée par l'exécution de la classe [BootElectionsSwing] suivante :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000FE000000941C25FA12.png" style="display:inline-block; margin:4px;width:4.701cm;height:2.739cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.ui.boot</span><span class="p">;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.ui.service.IElectionsUI</span><span class="p">;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BootElectionsSwing</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractBootElections</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">arguments</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">BootElectionsSwing</span><span class="p">().</span><span class="na">run</span><span class="p">();</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">IElectionsUI</span><span class="w"> </span><span class="nf">getUI</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="s">&quot;electionsSwing&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">IElectionsUI</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Nous avons expliqué un code analogue lorsqu'au paragraphe 9.5, page 135, nous avons expliqué le code des classes [AbstractBootElections] et [BootElectionsConsole]. Ligne 12, on récupère le bean nommé [electionsSwing] qui correspond au nom Spring standard pour la classe [ElectionsSwing].</p>
<h3 id="1037-initialisation-de-linterface-graphique">10.3.7. Initialisation de l'interface graphique</h3>
<p>Lorsque l'interface graphique est affichée, certains de ses composants ont été initialisés :</p>
<p><img src="images/10000000000002520000021987E754B8.png" style="width:11cm;height:9.94cm;" alt="Image" /></p>
<p>On voit ci-dessus : </p>
<ul>
<li>que le combo a été rempli avec les noms des listes ;</li>
<li>que le nombre de sièges à pourvoir et le seuil électoral sont indiqués ;</li>
<li>que certains liens ont été désactivés ;</li>
<li>qu'un message de succès est affiché en bas de la fenêtre ;</li>
</ul>
<p>A quel moment vont se faire ces initialisations ? Elles ne peuvent se faire qu'après initialisation du champ [electionsMetier] de la classe [ElectionsSwing]. En effet, les noms des listes vont être demandés à la couche [metier]. L'initialisation de ce champ va être faite par Spring dans l'ordre suivant :</p>
<ul>
<li>utilisation du constructeur sans paramètres de la classe [ElectionsSwing] ;</li>
<li>injection des dépendances, ici la référence de la couche [métier] ;</li>
<li>exécution de la méthode [run] de la classe [ElectionsSwing] :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a>    @Override
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>    public void run() {
<a id="__codelineno-30-3" name="__codelineno-30-3"></a>        // on affiche l&#39;interface graphique
<a id="__codelineno-30-4" name="__codelineno-30-4"></a>        SwingUtilities.invokeLater(new Runnable() {
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>            public void run() {
<a id="__codelineno-30-6" name="__codelineno-30-6"></a>                init();
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>                setVisible(true);
<a id="__codelineno-30-8" name="__codelineno-30-8"></a>            }
<a id="__codelineno-30-9" name="__codelineno-30-9"></a>        });
<a id="__codelineno-30-10" name="__codelineno-30-10"></a>}
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 12, nous avons dit qu'on appelait la méthode [init] de la classe parent qui va dessiner les composants de l'interface graphique. Nous allons redéfinir cette méthode, localement, dans la classe [ElectionsSwing]. C'est dans cette méthode que nous initialiserons, avec des données cette fois, les composants de la fenêtre (combo, labels) :</li>
</ul>
<p>La méthode locale [init] pourrait avoir le squelette suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span>
<span class="normal"><a href="#__codelineno-31-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a>public class ElectionsSwing extends AbstractElectionsSwing implements IElectionsUI {
<a id="__codelineno-31-2" name="__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>    ...
<a id="__codelineno-31-4" name="__codelineno-31-4"></a>  // référence sur la couche [métier]
<a id="__codelineno-31-5" name="__codelineno-31-5"></a>  @Autowired
<a id="__codelineno-31-6" name="__codelineno-31-6"></a>  private IElectionsMetier metier;
<a id="__codelineno-31-7" name="__codelineno-31-7"></a>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>    // initialisations
<a id="__codelineno-31-9" name="__codelineno-31-9"></a>    public void init() {
<a id="__codelineno-31-10" name="__codelineno-31-10"></a>      // génération des composants par la classe parent
<a id="__codelineno-31-11" name="__codelineno-31-11"></a>    super.init();
<a id="__codelineno-31-12" name="__codelineno-31-12"></a>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a>    // on demande les listes à la couche [metier]
<a id="__codelineno-31-14" name="__codelineno-31-14"></a>        ...
<a id="__codelineno-31-15" name="__codelineno-31-15"></a>        // on associe les noms des listes au combo jComboBoxNomsListes
<a id="__codelineno-31-16" name="__codelineno-31-16"></a>        ...
<a id="__codelineno-31-17" name="__codelineno-31-17"></a>        // ainsi que les paramètres de l&#39;élection
<a id="__codelineno-31-18" name="__codelineno-31-18"></a>        ...
<a id="__codelineno-31-19" name="__codelineno-31-19"></a>        // on initialise les labels liés à ces deux informations
<a id="__codelineno-31-20" name="__codelineno-31-20"></a>        ...
<a id="__codelineno-31-21" name="__codelineno-31-21"></a>        // message de succès
<a id="__codelineno-31-22" name="__codelineno-31-22"></a>        ...
<a id="__codelineno-31-23" name="__codelineno-31-23"></a>        // initialisation état de certains composants formulaire
<a id="__codelineno-31-24" name="__codelineno-31-24"></a>...
<a id="__codelineno-31-25" name="__codelineno-31-25"></a>}
</code></pre></div></td></tr></table></div>
<p>On notera bien, ligne 11, l'appel de la méthode [init] de la classe parent.</p>
<h3 id="1038-la-classe-utilitaires">10.3.8. La classe [Utilitaires]</h3>
<p>Un certain nombre de méthodes utilitaires statiques ont été rassemblées dans la classe [Utilitaires] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000010500000094F3639E55.png" style="display:inline-block; margin:4px;width:4.83cm;height:2.739cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [Utilitaires] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">istia.st.elections.ui</span><span class="p">;</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.swing.JLabel</span><span class="p">;</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">javax.swing.JMenuItem</span><span class="p">;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="c1">//classe utilitaire</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="kd">class</span> <span class="nc">Utilitaires</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="c1">// gérer l&#39;état d&#39;un tableau de labels</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setEnabled</span><span class="p">(</span><span class="n">JLabel</span><span class="o">[]</span><span class="w"> </span><span class="n">labels</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">labels</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">            </span><span class="n">labels</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="na">setEnabled</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">    </span><span class="c1">// gérer l&#39;état d&#39;un tableau d&#39;options de menu</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setEnabled</span><span class="p">(</span><span class="n">JMenuItem</span><span class="o">[]</span><span class="w"> </span><span class="n">menuItems</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 9 :  la méthode setEnabled fixe l'état de composants JLabel définis dans un tableau. La méthode setEnabled d'un composant JLabel permet d'activer ou de désactiver le JLabel.</li>
</ul>
<p><strong>Travail à faire</strong> : en suivant l'exemple de la méthode setEnabled de la ligne 9, écrivez la méthode setEnabled de la ligne 16 qui fait la même chose avec des composants JMenuItem.</p>
<h3 id="1039-le-code-de-la-classe-electionsswing">10.3.9. Le code de la classe [ElectionsSwing]</h3>
<p>Rappelons la structure générale de la classe [ElectionsSwing] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span>
<span class="normal"><a href="#__codelineno-33-20">20</a></span>
<span class="normal"><a href="#__codelineno-33-21">21</a></span>
<span class="normal"><a href="#__codelineno-33-22">22</a></span>
<span class="normal"><a href="#__codelineno-33-23">23</a></span>
<span class="normal"><a href="#__codelineno-33-24">24</a></span>
<span class="normal"><a href="#__codelineno-33-25">25</a></span>
<span class="normal"><a href="#__codelineno-33-26">26</a></span>
<span class="normal"><a href="#__codelineno-33-27">27</a></span>
<span class="normal"><a href="#__codelineno-33-28">28</a></span>
<span class="normal"><a href="#__codelineno-33-29">29</a></span>
<span class="normal"><a href="#__codelineno-33-30">30</a></span>
<span class="normal"><a href="#__codelineno-33-31">31</a></span>
<span class="normal"><a href="#__codelineno-33-32">32</a></span>
<span class="normal"><a href="#__codelineno-33-33">33</a></span>
<span class="normal"><a href="#__codelineno-33-34">34</a></span>
<span class="normal"><a href="#__codelineno-33-35">35</a></span>
<span class="normal"><a href="#__codelineno-33-36">36</a></span>
<span class="normal"><a href="#__codelineno-33-37">37</a></span>
<span class="normal"><a href="#__codelineno-33-38">38</a></span>
<span class="normal"><a href="#__codelineno-33-39">39</a></span>
<span class="normal"><a href="#__codelineno-33-40">40</a></span>
<span class="normal"><a href="#__codelineno-33-41">41</a></span>
<span class="normal"><a href="#__codelineno-33-42">42</a></span>
<span class="normal"><a href="#__codelineno-33-43">43</a></span>
<span class="normal"><a href="#__codelineno-33-44">44</a></span>
<span class="normal"><a href="#__codelineno-33-45">45</a></span>
<span class="normal"><a href="#__codelineno-33-46">46</a></span>
<span class="normal"><a href="#__codelineno-33-47">47</a></span>
<span class="normal"><a href="#__codelineno-33-48">48</a></span>
<span class="normal"><a href="#__codelineno-33-49">49</a></span>
<span class="normal"><a href="#__codelineno-33-50">50</a></span>
<span class="normal"><a href="#__codelineno-33-51">51</a></span>
<span class="normal"><a href="#__codelineno-33-52">52</a></span>
<span class="normal"><a href="#__codelineno-33-53">53</a></span>
<span class="normal"><a href="#__codelineno-33-54">54</a></span>
<span class="normal"><a href="#__codelineno-33-55">55</a></span>
<span class="normal"><a href="#__codelineno-33-56">56</a></span>
<span class="normal"><a href="#__codelineno-33-57">57</a></span>
<span class="normal"><a href="#__codelineno-33-58">58</a></span>
<span class="normal"><a href="#__codelineno-33-59">59</a></span>
<span class="normal"><a href="#__codelineno-33-60">60</a></span>
<span class="normal"><a href="#__codelineno-33-61">61</a></span>
<span class="normal"><a href="#__codelineno-33-62">62</a></span>
<span class="normal"><a href="#__codelineno-33-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">istia.st.elections.ui</span><span class="p">;</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="p">...</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ElectionsSwing</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractElectionsSwing</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IElectionsUI</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">  </span><span class="c1">// référence sur la couche [métier]</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">  </span><span class="nd">@Autowired</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">IElectionsMetier</span><span class="w"> </span><span class="n">metier</span><span class="p">;</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">    </span><span class="c1">// initialisations</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="w">    </span><span class="c1">// gestionnaires d&#39;évts</span>
<a id="__codelineno-33-17" name="__codelineno-33-17"></a>
<a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doInformer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="p">...</span>
<a id="__codelineno-33-21" name="__codelineno-33-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-22" name="__codelineno-33-22"></a>
<a id="__codelineno-33-23" name="__codelineno-33-23"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-24" name="__codelineno-33-24"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doAjouter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-25" name="__codelineno-33-25"></a><span class="p">...</span>
<a id="__codelineno-33-26" name="__codelineno-33-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-27" name="__codelineno-33-27"></a>
<a id="__codelineno-33-28" name="__codelineno-33-28"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-29" name="__codelineno-33-29"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doCalculer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-30" name="__codelineno-33-30"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-33-31" name="__codelineno-33-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-32" name="__codelineno-33-32"></a>
<a id="__codelineno-33-33" name="__codelineno-33-33"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-34" name="__codelineno-33-34"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEffacer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-35" name="__codelineno-33-35"></a><span class="p">...</span>
<a id="__codelineno-33-36" name="__codelineno-33-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-37" name="__codelineno-33-37"></a>
<a id="__codelineno-33-38" name="__codelineno-33-38"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-39" name="__codelineno-33-39"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doEnregistrer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-40" name="__codelineno-33-40"></a><span class="p">...</span>
<a id="__codelineno-33-41" name="__codelineno-33-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-42" name="__codelineno-33-42"></a>
<a id="__codelineno-33-43" name="__codelineno-33-43"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-44" name="__codelineno-33-44"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doQuitter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-45" name="__codelineno-33-45"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-33-46" name="__codelineno-33-46"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-47" name="__codelineno-33-47"></a>
<a id="__codelineno-33-48" name="__codelineno-33-48"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-49" name="__codelineno-33-49"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doSupprimer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-50" name="__codelineno-33-50"></a><span class="p">...</span>
<a id="__codelineno-33-51" name="__codelineno-33-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-52" name="__codelineno-33-52"></a>
<a id="__codelineno-33-53" name="__codelineno-33-53"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-54" name="__codelineno-33-54"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelAjouter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-55" name="__codelineno-33-55"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-33-56" name="__codelineno-33-56"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-57" name="__codelineno-33-57"></a>
<a id="__codelineno-33-58" name="__codelineno-33-58"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-33-59" name="__codelineno-33-59"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doMajLabelSupprimer</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-60" name="__codelineno-33-60"></a><span class="p">...</span>
<a id="__codelineno-33-61" name="__codelineno-33-61"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-62" name="__codelineno-33-62"></a>
<a id="__codelineno-33-63" name="__codelineno-33-63"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Nous allons étudier les méthodes de la classe les unes après les autres.</p>
<h4 id="10391-la-methode-init">10.3.9.1. La méthode [init]</h4>
<p>Revenons sur l'interface graphique :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000003AE00000355C8476B5D.png" style="display:inline-block; margin:4px;width:12.462cm;height:11.285cm;" /></td></tr></table>

<p>La méthode [init] a pour objectifs :</p>
<ul>
<li>de remplir le combo [4] avec les identifiants et noms des listes sous la forme [id - nom]</li>
<li>d'afficher un message de succès dans [15]</li>
<li>d'initialiser les labels [2] et [3]</li>
<li>de désactiver certains liens</li>
</ul>
<p>Le squelette de la méthode [init] pourrait être le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span>
<span class="normal"><a href="#__codelineno-34-30">30</a></span>
<span class="normal"><a href="#__codelineno-34-31">31</a></span>
<span class="normal"><a href="#__codelineno-34-32">32</a></span>
<span class="normal"><a href="#__codelineno-34-33">33</a></span>
<span class="normal"><a href="#__codelineno-34-34">34</a></span>
<span class="normal"><a href="#__codelineno-34-35">35</a></span>
<span class="normal"><a href="#__codelineno-34-36">36</a></span>
<span class="normal"><a href="#__codelineno-34-37">37</a></span>
<span class="normal"><a href="#__codelineno-34-38">38</a></span>
<span class="normal"><a href="#__codelineno-34-39">39</a></span>
<span class="normal"><a href="#__codelineno-34-40">40</a></span>
<span class="normal"><a href="#__codelineno-34-41">41</a></span>
<span class="normal"><a href="#__codelineno-34-42">42</a></span>
<span class="normal"><a href="#__codelineno-34-43">43</a></span>
<span class="normal"><a href="#__codelineno-34-44">44</a></span>
<span class="normal"><a href="#__codelineno-34-45">45</a></span>
<span class="normal"><a href="#__codelineno-34-46">46</a></span>
<span class="normal"><a href="#__codelineno-34-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a>@Override
<a id="__codelineno-34-2" name="__codelineno-34-2"></a>    protected void init() {
<a id="__codelineno-34-3" name="__codelineno-34-3"></a>        // génération des composants par la classe parent
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>        super.init();
<a id="__codelineno-34-5" name="__codelineno-34-5"></a>        // initialisations locales
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>        modèleNomsVoix = new DefaultListModel&lt;&gt;();
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>        jListNomsVoix.setModel(modèleNomsVoix);
<a id="__codelineno-34-8" name="__codelineno-34-8"></a>        modèleRésultats = new DefaultListModel&lt;&gt;();
<a id="__codelineno-34-9" name="__codelineno-34-9"></a>        jListResultats.setModel(modèleRésultats);
<a id="__codelineno-34-10" name="__codelineno-34-10"></a>        String info;
<a id="__codelineno-34-11" name="__codelineno-34-11"></a>        try {
<a id="__codelineno-34-12" name="__codelineno-34-12"></a>            // on demande les listes à la couche [métier]
<a id="__codelineno-34-13" name="__codelineno-34-13"></a>            listes = ...
<a id="__codelineno-34-14" name="__codelineno-34-14"></a>            // on associe les noms des listes au combo jComboBoxNomsListes
<a id="__codelineno-34-15" name="__codelineno-34-15"></a>            ...
<a id="__codelineno-34-16" name="__codelineno-34-16"></a>            // ainsi que les paramètres de l&#39;élection
<a id="__codelineno-34-17" name="__codelineno-34-17"></a>            int nbSiegesAPourvoir = ...
<a id="__codelineno-34-18" name="__codelineno-34-18"></a>            double seuilElectoral = ...
<a id="__codelineno-34-19" name="__codelineno-34-19"></a>            // on initialise les labels liés à ces deux informations
<a id="__codelineno-34-20" name="__codelineno-34-20"></a>            ...
<a id="__codelineno-34-21" name="__codelineno-34-21"></a>            // message de succès
<a id="__codelineno-34-22" name="__codelineno-34-22"></a>            info = &quot;Source de données lue avec succès&quot;;
<a id="__codelineno-34-23" name="__codelineno-34-23"></a>        } catch (ElectionsException ex1) {
<a id="__codelineno-34-24" name="__codelineno-34-24"></a>            // on note l&#39;erreur
<a id="__codelineno-34-25" name="__codelineno-34-25"></a>            info = getInfoForException(&quot;Les erreurs suivantes se sont produites :&quot;, ex1);
<a id="__codelineno-34-26" name="__codelineno-34-26"></a>        } catch (RuntimeException ex2) {
<a id="__codelineno-34-27" name="__codelineno-34-27"></a>            // on note l&#39;erreur
<a id="__codelineno-34-28" name="__codelineno-34-28"></a>            info = getInfoForException(&quot;Les erreurs suivantes se sont produites :&quot;, ex2);
<a id="__codelineno-34-29" name="__codelineno-34-29"></a>        }
<a id="__codelineno-34-30" name="__codelineno-34-30"></a>        // on affiche l&#39;info
<a id="__codelineno-34-31" name="__codelineno-34-31"></a>        jTextPaneMessages.setText(info);
<a id="__codelineno-34-32" name="__codelineno-34-32"></a>        jTextPaneMessages.setCaretPosition(0);
<a id="__codelineno-34-33" name="__codelineno-34-33"></a>        // état formulaire
<a id="__codelineno-34-34" name="__codelineno-34-34"></a>        Utilitaires.setEnabled(new JLabel[] { jLabelAjouter, jLabelCalculer, jLabelEnregistrer, jLabelSupprimer }, false);
<a id="__codelineno-34-35" name="__codelineno-34-35"></a>        Utilitaires.setEnabled(
<a id="__codelineno-34-36" name="__codelineno-34-36"></a>                new JMenuItem[] { jMenuItemAjouter, jMenuItemCalculer, jMenuItemEnregistrer, jMenuItemSupprimer }, false);
<a id="__codelineno-34-37" name="__codelineno-34-37"></a>        // centrer la fenêtre
<a id="__codelineno-34-38" name="__codelineno-34-38"></a>        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
<a id="__codelineno-34-39" name="__codelineno-34-39"></a>        Dimension frameSize = getSize();
<a id="__codelineno-34-40" name="__codelineno-34-40"></a>        if (frameSize.height &gt; screenSize.height) {
<a id="__codelineno-34-41" name="__codelineno-34-41"></a>            frameSize.height = screenSize.height;
<a id="__codelineno-34-42" name="__codelineno-34-42"></a>        }
<a id="__codelineno-34-43" name="__codelineno-34-43"></a>        if (frameSize.width &gt; screenSize.width) {
<a id="__codelineno-34-44" name="__codelineno-34-44"></a>            frameSize.width = screenSize.width;
<a id="__codelineno-34-45" name="__codelineno-34-45"></a>        }
<a id="__codelineno-34-46" name="__codelineno-34-46"></a>        setLocation((screenSize.width - frameSize.width) / 2, (screenSize.height - frameSize.height) / 2);
<a id="__codelineno-34-47" name="__codelineno-34-47"></a>    }
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a>    private String getInfoForException(String message, ElectionsException ex) {
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>        // on affiche le message
<a id="__codelineno-35-3" name="__codelineno-35-3"></a>        StringBuffer info = new StringBuffer(String.format(&quot;%s -------------\n&quot;, message));
<a id="__codelineno-35-4" name="__codelineno-35-4"></a>        info.append(String.format(&quot;Code erreur : %d\n&quot;, ex.getCode()));
<a id="__codelineno-35-5" name="__codelineno-35-5"></a>        // on affiche les erreurs
<a id="__codelineno-35-6" name="__codelineno-35-6"></a>        for (String erreur : ex.getErreurs()) {
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>            info.append(String.format(&quot;-- %s\n&quot;, erreur));
<a id="__codelineno-35-8" name="__codelineno-35-8"></a>        }
<a id="__codelineno-35-9" name="__codelineno-35-9"></a>        return info.toString();
<a id="__codelineno-35-10" name="__codelineno-35-10"></a>    }
<a id="__codelineno-35-11" name="__codelineno-35-11"></a>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a>    private String getInfoForException(String message, RuntimeException ex) {
<a id="__codelineno-35-13" name="__codelineno-35-13"></a>        // on affiche le message
<a id="__codelineno-35-14" name="__codelineno-35-14"></a>        StringBuffer info = new StringBuffer(String.format(&quot;%s -------------\n&quot;, message));
<a id="__codelineno-35-15" name="__codelineno-35-15"></a>        // on affiche la pile des exceptions
<a id="__codelineno-35-16" name="__codelineno-35-16"></a>        Throwable cause = ex;
<a id="__codelineno-35-17" name="__codelineno-35-17"></a>        while (cause != null) {
<a id="__codelineno-35-18" name="__codelineno-35-18"></a>            info.append(String.format(&quot;-- %s\n&quot;, cause.getMessage()));
<a id="__codelineno-35-19" name="__codelineno-35-19"></a>            cause = cause.getCause();
<a id="__codelineno-35-20" name="__codelineno-35-20"></a>        }
<a id="__codelineno-35-21" name="__codelineno-35-21"></a>        return info.toString();
<a id="__codelineno-35-22" name="__codelineno-35-22"></a>    }
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [init].</p>
<p>A lire dans le cours : composants JTextField, JLabel</p>
<p><strong>A savoir</strong> :</p>
<p>Un composant JList affiche les données présentes dans un modèle. Par défaut, ce modèle est de type DefaultListModel (lignes 2 et 3). Un objet de DefaultListModel  se comporte un peu comme un type ArrayList :</p>
<ul>
<li>pour ajouter un objet o dans le modèle :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a>[DefaultListModel].addElement(Object o);
</code></pre></div></td></tr></table></div>
<p>Dans cette application, l'objet o sera toujours de type String.</p>
<ul>
<li>pour enlever l'élément n° i du modèle :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a>[DefaultListModel].remove(int i);
</code></pre></div></td></tr></table></div>
<ul>
<li>pour obtenir l'élément n° i du modèle :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a>[DefaultListModel].elementAt(int i);
</code></pre></div></td></tr></table></div>
<p>Pour ajouter un élément au combo [jComboBoxNomsListes], on utilisera la méthode [addItem] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a>jComboBoxNomsListes.addItem(chaîne de caractères)
</code></pre></div></td></tr></table></div>
<p>Un composant JTextPane a les méthodes getText() et setText() pour lire / écrire le texte affiché.</p>
<h4 id="10392-gerer-letat-du-lien-ajouter">10.3.9.2. Gérer l'état du lien [Ajouter]</h4>
<p>Le lien [Ajouter] [6] n'est actif que lorsque le champ [5] des voix est non vide. Dans la classe [AbstractElectionsSwing], le gestionnaire qui suit les mouvements du curseur dans le champ [5] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jTextFieldVoixListeCaretUpdate</span><span class="p">(</span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">CaretEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="n">doMajLabelAjouter</span><span class="p">()</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 2 appelle la méthode [doMajLabelAjouter] de la classe [ElectionsSwing].</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a>    protected void doMajLabelAjouter() {
<a id="__codelineno-41-2" name="__codelineno-41-2"></a>        // on fixe l&#39;état du label [jLabelAjouter]
<a id="__codelineno-41-3" name="__codelineno-41-3"></a>        ...
<a id="__codelineno-41-4" name="__codelineno-41-4"></a>        // on fixe l&#39;état du menu [jMenuItemAjouter]
<a id="__codelineno-41-5" name="__codelineno-41-5"></a>        ...
<a id="__codelineno-41-6" name="__codelineno-41-6"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doMajLabelAjouter].</p>
<h4 id="10393-affecter-les-voix-a-chaque-liste">10.3.9.3. Affecter les voix à chaque liste</h4>
<p>Pour chaque liste candidate de (4), on procède ainsi :</p>
<ul>
<li>choix d'une liste dans (4)</li>
<li>saisie du nombre de voix dans (5)</li>
<li>validation par un clic sur le lien [Ajouter]</li>
</ul>
<p>Les erreurs de saisie sont signalées comme le montre l'exemple suivant :</p>
<p><img src="images/10000000000001F50000007952FDAE3C.png" style="width:9.28cm;height:2.24cm;" alt="Image" /></p>
<p>Si le nombre de voix est correct, la liste est ajoutée dans le composant (8), le nombre de voix effacé et le lien [Ajouter] éteint :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000010700000050C8319E8A.png" style="display:inline-block; margin:4px;width:4.87cm;height:1.48cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001A700000086A5A768BE.png" style="display:inline-block; margin:4px;width:7.83cm;height:2.48cm;" /></td></tr></table>

<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui gère le clic sur le lien [Ajouter] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span>
<span class="normal"><a href="#__codelineno-42-4">4</a></span>
<span class="normal"><a href="#__codelineno-42-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelAjouterMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">jLabelAjouter</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="w">            </span><span class="n">doAjouter</span><span class="p">();</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 3 appelle la méthode [doAjouter] de la classe [ElectionsSwing] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-43-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-43-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-43-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-43-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-43-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-43-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-43-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-43-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-43-10">10</a></span>
<span class="normal"><a href="#__codelineno-43-11">11</a></span>
<span class="normal"><a href="#__codelineno-43-12">12</a></span>
<span class="normal"><a href="#__codelineno-43-13">13</a></span>
<span class="normal"><a href="#__codelineno-43-14">14</a></span>
<span class="normal"><a href="#__codelineno-43-15">15</a></span>
<span class="normal"><a href="#__codelineno-43-16">16</a></span>
<span class="normal"><a href="#__codelineno-43-17">17</a></span>
<span class="normal"><a href="#__codelineno-43-18">18</a></span>
<span class="normal"><a href="#__codelineno-43-19">19</a></span>
<span class="normal"><a href="#__codelineno-43-20">20</a></span>
<span class="normal"><a href="#__codelineno-43-21">21</a></span>
<span class="normal"><a href="#__codelineno-43-22">22</a></span>
<span class="normal"><a href="#__codelineno-43-23">23</a></span>
<span class="normal"><a href="#__codelineno-43-24">24</a></span>
<span class="normal"><a href="#__codelineno-43-25">25</a></span>
<span class="normal"><a href="#__codelineno-43-26">26</a></span>
<span class="normal"><a href="#__codelineno-43-27">27</a></span>
<span class="normal"><a href="#__codelineno-43-28">28</a></span>
<span class="normal"><a href="#__codelineno-43-29">29</a></span>
<span class="normal"><a href="#__codelineno-43-30">30</a></span>
<span class="normal"><a href="#__codelineno-43-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a>  // modèles des listes JList
<a id="__codelineno-43-2" name="__codelineno-43-2"></a>  private DefaultListModel&lt;String&gt; modèleNomsVoix = null;
<a id="__codelineno-43-3" name="__codelineno-43-3"></a>  private DefaultListModel&lt;String&gt; modèleRésultats = null;
<a id="__codelineno-43-4" name="__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a>  // les listes en compétition
<a id="__codelineno-43-6" name="__codelineno-43-6"></a>  private ListeElectorale[] listes;
<a id="__codelineno-43-7" name="__codelineno-43-7"></a>
<a id="__codelineno-43-8" name="__codelineno-43-8"></a>  // listes saisies par l&#39;utilisateur
<a id="__codelineno-43-9" name="__codelineno-43-9"></a>  private final List&lt;ListeElectorale&gt; listesSaisies = new ArrayList&lt;&gt;();
<a id="__codelineno-43-10" name="__codelineno-43-10"></a>  private ListeElectorale[] tListesSaisies;
<a id="__codelineno-43-11" name="__codelineno-43-11"></a>...
<a id="__codelineno-43-12" name="__codelineno-43-12"></a>  @Override
<a id="__codelineno-43-13" name="__codelineno-43-13"></a>  protected void doAjouter() {
<a id="__codelineno-43-14" name="__codelineno-43-14"></a>    // le nombre de voix est-il correct ?
<a id="__codelineno-43-15" name="__codelineno-43-15"></a>    ...
<a id="__codelineno-43-16" name="__codelineno-43-16"></a>    // si erreur, alors on la signale
<a id="__codelineno-43-17" name="__codelineno-43-17"></a>    if (erreur) {
<a id="__codelineno-43-18" name="__codelineno-43-18"></a>      JOptionPane.showMessageDialog(null, &quot;Nombre de voix incorrect&quot;, &quot;Elections : erreur&quot;,
<a id="__codelineno-43-19" name="__codelineno-43-19"></a>              JOptionPane.INFORMATION_MESSAGE);
<a id="__codelineno-43-20" name="__codelineno-43-20"></a>      jTextFieldVoixListe.requestFocus();
<a id="__codelineno-43-21" name="__codelineno-43-21"></a>      // retour à l&#39;interface graphique
<a id="__codelineno-43-22" name="__codelineno-43-22"></a>      return;
<a id="__codelineno-43-23" name="__codelineno-43-23"></a>    }
<a id="__codelineno-43-24" name="__codelineno-43-24"></a>    // pas d&#39;erreur - on enregistre la liste
<a id="__codelineno-43-25" name="__codelineno-43-25"></a>    listesSaisies.add(...);
<a id="__codelineno-43-26" name="__codelineno-43-26"></a>    modèleNomsVoix.addElement(...);
<a id="__codelineno-43-27" name="__codelineno-43-27"></a>    // on nettoie le nombre de voix
<a id="__codelineno-43-28" name="__codelineno-43-28"></a>    jTextFieldVoixListe.setText(&quot;&quot;);
<a id="__codelineno-43-29" name="__codelineno-43-29"></a>    // état formulaire (menus, labels)
<a id="__codelineno-43-30" name="__codelineno-43-30"></a>...
<a id="__codelineno-43-31" name="__codelineno-43-31"></a>}
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 25 : à chaque fois que l'utilisateur ajoute des voix à une liste et valide son choix, cette liste est mise dans le champ [listesSaisies] de la ligne 9. On y enregistrera la liste avec les informations [id, version, nom, voix]. Les trois premières informations viennent des listes enregistrées initialement dans le tableau de la ligne 6. La méthode [getSelectedIndex] du combo permet de connaître l'indice de la liste sélectionnée ;</li>
</ul>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doAjouter].</p>
<h4 id="10394-gerer-letat-du-lien-supprimer">10.3.9.4. Gérer l'état du lien [Supprimer]</h4>
<p>Le lien [Supprimer] [9] n'est actif que lorsqu'un élément est sélectionné dans [8].</p>
<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui réagit au clic sur un élément de la liste [8] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jListNomsVoixValueChanged</span><span class="p">(</span><span class="n">javax</span><span class="p">.</span><span class="na">swing</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">ListSelectionEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">    </span><span class="n">doMajLabelSupprimer</span><span class="p">();</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 2 appelle la méthode [doMajLabelSupprimer] de la classe [ElectionsSwing].</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a>    @Override
<a id="__codelineno-45-2" name="__codelineno-45-2"></a>    protected void doMajLabelSupprimer() {
<a id="__codelineno-45-3" name="__codelineno-45-3"></a>            // on allume le label [jLabelSupprimer] et l&#39;option de menu correspondante
<a id="__codelineno-45-4" name="__codelineno-45-4"></a>            ...
<a id="__codelineno-45-5" name="__codelineno-45-5"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doMajLabelSupprimer].</p>
<h4 id="10395-supprimer-une-liste-candidate">10.3.9.5. Supprimer une liste candidate</h4>
<p>Le lien [Supprimer] [9] permet de supprimer le couple (nom,voix) sélectionné dans (8). Une fois la suppression opérée, le lien [Supprimer] est éteint. Il ne sera rallumé que sur sélection d'une nouvelle liste dans (8).</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000A4000000818CF2F26E.png" style="display:inline-block; margin:4px;width:3.47cm;height:2.731cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000A60000007D7A7AA404.png" style="display:inline-block; margin:4px;width:3.51cm;height:2.649cm;" /></td></tr></table>

<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui réagit au clic sur le lien [Supprimer] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelSupprimerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">jLabelSupprimer</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">()){</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="w">      </span><span class="n">doSupprimer</span><span class="p">();</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 3 appelle la méthode [doSupprimer] de la classe [ElectionsSwing].</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span>
<span class="normal"><a href="#__codelineno-47-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a>@Override
<a id="__codelineno-47-2" name="__codelineno-47-2"></a>    protected void doSupprimer() {
<a id="__codelineno-47-3" name="__codelineno-47-3"></a>        // suppression de la liste sélectionnée, du modèle modèleNomsVoix et des listes saisies
<a id="__codelineno-47-4" name="__codelineno-47-4"></a>        ...
<a id="__codelineno-47-5" name="__codelineno-47-5"></a>        // maj de l&#39;état des labels et options de menu du formulaire
<a id="__codelineno-47-6" name="__codelineno-47-6"></a>        Utilitaires.setEnabled(...);
<a id="__codelineno-47-7" name="__codelineno-47-7"></a>    ...
<a id="__codelineno-47-8" name="__codelineno-47-8"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doSupprimer].</p>
<h4 id="10396-gerer-letat-du-lien-calculer">10.3.9.6. Gérer l'état du lien [Calculer]</h4>
<p>Le lien [Calculer] [10] n'est actif que lorsqu'il existe au moins un élément dans [8].</p>
<p><strong>Travail à faire</strong> : ajoutez le code nécessaire à la gestion de ce lien dans les méthodes [doAjouter] et [doSupprimer] écrites précédemment. L'option de menu correspondante sera également gérée.</p>
<p><strong>A savoir</strong> : le nombre d'éléments d'un élément de type DefaultListModel est obtenu avec la méthode size().</p>
<h4 id="10397-calculer-les-sieges">10.3.9.7. Calculer les sièges</h4>
<p>Le lien [Calculer] [10] permet de lancer le calcul des sièges et d'afficher les résultats dans (14). En cas d'échec (toutes les listes ont été éliminées), un message d'erreur est affiché dans [15]. Dans tous les cas, après calcul, le lien [Calculer] [10] est désactivé.</p>
<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui réagit au clic sur le lien [Calculer] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span>
<span class="normal"><a href="#__codelineno-48-2">2</a></span>
<span class="normal"><a href="#__codelineno-48-3">3</a></span>
<span class="normal"><a href="#__codelineno-48-4">4</a></span>
<span class="normal"><a href="#__codelineno-48-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelCalculerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">jLabelCalculer</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">()){</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">      </span><span class="n">doCalculer</span><span class="p">();</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 3 appelle la méthode [doCalculer] de la classe [ElectionsSwing].</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span>
<span class="normal"><a href="#__codelineno-49-18">18</a></span>
<span class="normal"><a href="#__codelineno-49-19">19</a></span>
<span class="normal"><a href="#__codelineno-49-20">20</a></span>
<span class="normal"><a href="#__codelineno-49-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a>  // listes saisies par l&#39;utilisateur
<a id="__codelineno-49-2" name="__codelineno-49-2"></a>  private final List&lt;ListeElectorale&gt; listesSaisies = new ArrayList&lt;&gt;();
<a id="__codelineno-49-3" name="__codelineno-49-3"></a>  private ListeElectorale[] tListesSaisies;
<a id="__codelineno-49-4" name="__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a>...
<a id="__codelineno-49-6" name="__codelineno-49-6"></a>  @Override
<a id="__codelineno-49-7" name="__codelineno-49-7"></a>  protected void doCalculer() {
<a id="__codelineno-49-8" name="__codelineno-49-8"></a>    tListesSaisies = listesSaisies.toArray(new ListeElectorale[0]);
<a id="__codelineno-49-9" name="__codelineno-49-9"></a>    // calcul des sièges
<a id="__codelineno-49-10" name="__codelineno-49-10"></a>    try {
<a id="__codelineno-49-11" name="__codelineno-49-11"></a>      ...
<a id="__codelineno-49-12" name="__codelineno-49-12"></a>    } catch (ElectionsException ex) {
<a id="__codelineno-49-13" name="__codelineno-49-13"></a>      // on affiche l&#39;exception
<a id="__codelineno-49-14" name="__codelineno-49-14"></a>      ...
<a id="__codelineno-49-15" name="__codelineno-49-15"></a>      return;
<a id="__codelineno-49-16" name="__codelineno-49-16"></a>    }
<a id="__codelineno-49-17" name="__codelineno-49-17"></a>    // affichage des résultats
<a id="__codelineno-49-18" name="__codelineno-49-18"></a>    ...
<a id="__codelineno-49-19" name="__codelineno-49-19"></a>    // maj état formulaire
<a id="__codelineno-49-20" name="__codelineno-49-20"></a>    Utilitaires.setEnabled(...);
<a id="__codelineno-49-21" name="__codelineno-49-21"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doCalculer].</p>
<h4 id="10398-enregistrer-les-resultats-dans-la-source-de-donnees">10.3.9.8. Enregistrer les résultats dans la source de données</h4>
<p>Le lien [Enregistrer] (12) permet d'enregistrer les résultats du calcul des sièges dans la source de données. Une fois l'enregistrement opéré avec succès, le lien [Enregistrer] est désactivé. En cas d'échec, un message d'erreur est affiché dans [15]. Dans tous les cas, le lien [Enregistrer] est ensuite désactivé.</p>
<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui gère le clic sur le label [Enregistrer] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span>
<span class="normal"><a href="#__codelineno-50-3">3</a></span>
<span class="normal"><a href="#__codelineno-50-4">4</a></span>
<span class="normal"><a href="#__codelineno-50-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelEnregistrerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">jLabelEnregistrer</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">()){</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">      </span><span class="n">doEnregistrer</span><span class="p">();</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 3 appelle la méthode [doEnregistrer] de la classe [ElectionsSwing] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a>@Override
<a id="__codelineno-51-2" name="__codelineno-51-2"></a>    protected void doEnregistrer() {
<a id="__codelineno-51-3" name="__codelineno-51-3"></a>        // on demande l&#39;enregistrement à la couche métier
<a id="__codelineno-51-4" name="__codelineno-51-4"></a>        try {
<a id="__codelineno-51-5" name="__codelineno-51-5"></a>            ...
<a id="__codelineno-51-6" name="__codelineno-51-6"></a>        } catch (ElectionsException ex) {
<a id="__codelineno-51-7" name="__codelineno-51-7"></a>            // on affiche l&#39;exception
<a id="__codelineno-51-8" name="__codelineno-51-8"></a>            ...
<a id="__codelineno-51-9" name="__codelineno-51-9"></a>            // retour à l&#39;interface graphique
<a id="__codelineno-51-10" name="__codelineno-51-10"></a>            return;
<a id="__codelineno-51-11" name="__codelineno-51-11"></a>        }
<a id="__codelineno-51-12" name="__codelineno-51-12"></a>        // maj du formulaire
<a id="__codelineno-51-13" name="__codelineno-51-13"></a>        Utilitaires.setEnabled(...);
<a id="__codelineno-51-14" name="__codelineno-51-14"></a>...
<a id="__codelineno-51-15" name="__codelineno-51-15"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doEnregistrer].</p>
<h4 id="10399-effacer-les-resultats">10.3.9.9. Effacer les résultats</h4>
<p>Le lien [Effacer] (11) permet d'effacer les résultats affichés dans (14).</p>
<p>Dans la classe [AbstractElectionsSwing], le gestionnaire qui gère le clic sur le label [Effacer] est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span>
<span class="normal"><a href="#__codelineno-52-3">3</a></span>
<span class="normal"><a href="#__codelineno-52-4">4</a></span>
<span class="normal"><a href="#__codelineno-52-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">jLabelEffacerMouseClicked</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">awt</span><span class="p">.</span><span class="na">event</span><span class="p">.</span><span class="na">MouseEvent</span><span class="w"> </span><span class="n">evt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">jLabelEffacer</span><span class="p">.</span><span class="na">isEnabled</span><span class="p">()){</span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="w">      </span><span class="n">doEffacer</span><span class="p">();</span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>La ligne 3 appelle la méthode [doEffacer] de la classe [ElectionsSwing] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">1</a></span>
<span class="normal"><a href="#__codelineno-53-2">2</a></span>
<span class="normal"><a href="#__codelineno-53-3">3</a></span>
<span class="normal"><a href="#__codelineno-53-4">4</a></span>
<span class="normal"><a href="#__codelineno-53-5">5</a></span>
<span class="normal"><a href="#__codelineno-53-6">6</a></span>
<span class="normal"><a href="#__codelineno-53-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a>    @Override
<a id="__codelineno-53-2" name="__codelineno-53-2"></a>    protected void doEffacer() {
<a id="__codelineno-53-3" name="__codelineno-53-3"></a>        // on vide la liste des résultats
<a id="__codelineno-53-4" name="__codelineno-53-4"></a>        ....
<a id="__codelineno-53-5" name="__codelineno-53-5"></a>        // maj du formulaire
<a id="__codelineno-53-6" name="__codelineno-53-6"></a>        Utilitaires.setEnabled(...);
<a id="__codelineno-53-7" name="__codelineno-53-7"></a>}
</code></pre></div></td></tr></table></div>
<p><strong>Travail à faire</strong> : complétez le code de la méthode [doEffacer].</p>
<p><strong>A savoir</strong> : la classe DefaultListModel  a une méthode clear() qui supprime tous ses éléments.</p>
<h3 id="10310-ameliorations">10.3.10. Améliorations</h3>
<p>L'interface graphique précédente peut être améliorée de diverses façons : l'utilisateur peut, par oubli, ne pas saisir les voix de toutes les listes présentes dans le combo et par ailleurs, il peut, par erreur, saisir plusieurs fois les voix d'une même liste.</p>
<p><strong>Travail à faire</strong> : améliorez l'algorithme afin que ces deux cas ne puissent pas se produire. Une solution simple est de gérer un dictionnaire des listes saisies dont les clés seraient les éléments du combo. On fera également en sorte que le lien [Calculer] ne soit allumé que lorsque la totalité des listes a été saisie.</p>
<p><strong>A lire dans le cours</strong> [<a href="http://tahe.developpez.com/java/cours"><u>ref1</u></a>] : la classe HashTable au paragraphe 3.8.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner">

      <div>
        <a href="https://tahe.developpez.com" target="_blank">
          https://tahe.developpez.com
        </a>
        <br>
        Ce cours tutoriel écrit par <strong>Serge Tahé</strong> est mis à disposition du public selon les termes de la
        <em>Licence Creative Commons Attribution – Pas d’Utilisation Commerciale –
        Partage dans les Mêmes Conditions 3.0 non transposé</em>.
      </div>

    </div>
  </div>

      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.sections", "navigation.indexes", "navigation.expand", "toc.integrate", "navigation.top"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="javascripts/focus.js"></script>
      
    
  </body>
</html>