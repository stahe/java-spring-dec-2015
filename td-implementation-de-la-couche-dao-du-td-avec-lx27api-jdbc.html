
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas">
      
      
        <meta name="author" content="Serge Tahé">
      
      
        <link rel="canonical" href="https://stahe.github.io/java-spring-dec-2015/td-implementation-de-la-couche-dao-du-td-avec-lx27api-jdbc.html">
      
      
        <link rel="prev" href="cours-introduction-a-lx27api-jdbc.html">
      
      
        <link rel="next" href="td-la-couche-metier.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>7. [TD] : Implémentation de la couche [DAO] du TD avec l'API JDBC - Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/focus.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#7-td-implementation-de-la-couche-dao-du-td-avec-lapi-jdbc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Introduction au langage Java et à l&#39;écosystème Spring au travers d&#39;une étude de cas" class="md-header__button md-logo" aria-label="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              7. [TD] : Implémentation de la couche [DAO] du TD avec l&#x27;API JDBC
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Passer au mode sombre"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Passer au mode sombre" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Passer au mode clair"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Passer au mode clair" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/stahe/java-spring-dec-2015" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Introduction au langage Java et à l&#39;écosystème Spring au travers d&#39;une étude de cas" class="md-nav__button md-logo" aria-label="Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Introduction au langage Java et à l'écosystème Spring au travers d'une étude de cas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stahe/java-spring-dec-2015" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-le-probleme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. [TD] : Le problème
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-classes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. [TD] : Classes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-architectures-en-couches.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. [TD] : Architectures en couches
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-introduction-au-framework-spring.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. [Cours] : Introduction au framework Spring
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-introduction-a-lx27api-jdbc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. [Cours] : Introduction à l&#x27;API JDBC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    7. [TD] : Implémentation de la couche [DAO] du TD avec l&#x27;API JDBC
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="td-implementation-de-la-couche-dao-du-td-avec-lx27api-jdbc.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    7. [TD] : Implémentation de la couche [DAO] du TD avec l&#x27;API JDBC
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#71-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1. Support
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#72-la-base-de-donnees-dbelections" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2. La base de données [dbelections]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#73-le-projet-eclipse" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3. Le projet Eclipse
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#74-configuration-du-projet-maven" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4. Configuration du projet Maven
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#75-les-entites-de-la-couche-dao" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5. Les entités de la couche [DAO]
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.5. Les entités de la couche [DAO]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#751-la-classe-electionsexception" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5.1. La classe [ElectionsException]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#752-la-classe-abstractentity" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5.2. La classe [AbstractEntity]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#753-la-classe-electionsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5.3. La classe [ElectionsConfig]
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#754-la-classe-listeelectorale" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5.4. La classe [ListeElectorale]
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#76-configuration-spring-de-la-couche-dao" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.6. Configuration Spring de la couche [DAO]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#77-configuration-des-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.7. Configuration des logs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#78-implementation-de-la-couche-dao" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.8. Implémentation de la couche [DAO]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#79-la-classe-de-test-main" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.9. La classe de test [Main]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#710-tests-junit-de-la-classe-electionsdaojdbc" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.10. Tests JUnit de la classe [ElectionsDaoJdbc]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#711-creation-de-larchive-with-dependencies-de-la-couche-dao" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.11. Création de l&#x27;archive [with-dependencies] de la couche [dao]
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#712-test-de-larchive-de-la-couche-dao" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.12. Test de l&#x27;archive de la couche [DAO]
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-la-couche-metier.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. [TD] : La couche [metier]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-ui-avec-un-programme-console.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9. [TD] : Implémentation de la couche [ui] avec un programme console
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-ui-avec-une-interface-swing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10. [TD] : Implémentation de la couche [ui] avec une interface Swing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-gestion-des-bases-de-donnees-relationnelles-avec-spring-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11. [Cours] : Gestion des bases de données relationnelles avec Spring Data
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-implementation-de-la-couche-dao-du-td-avec-spring-data.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    12. [TD] : Implémentation de la couche [DAO] du TD avec [Spring Data]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-exposer-une-base-de-donnees-sur-le-web-avec-spring-mvc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    13. [Cours] : Exposer une base de données sur le web avec Spring MVC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-exposition-sur-le-web-de-la-couche-metier.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    14. [TD] : Exposition sur le web de la couche [metier]
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-creation-dx27un-client-pour-le-service-web.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    15. [TD] : création d&#x27;un client pour le service web
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-securiser-lx27acces-a-un-service-web-avec-spring-security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    16. [Cours] : Sécuriser l&#x27;accès à un service web avec Spring Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-securisation-du-serveur-web--json-des-elections.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    17. [TD] : sécurisation du serveur web / jSON des élections
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="cours-gestion-des-acces-inter-domaines.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    18. [Cours] : Gestion des accès inter-domaines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="td-elections-avec-des-requetes-inter-domaines.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    19. [TD] Elections avec des requêtes inter-domaines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="programmation-asynchrone-avec-rxjava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    20. Programmation asynchrone avec RxJava
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="conclusion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    21. Conclusion
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="annexes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    22. Annexes
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="7-td-implementation-de-la-couche-dao-du-td-avec-lapi-jdbc">7. [TD] : Implémentation de la couche [DAO] du TD avec l&#x27;API JDBC</h1>
<p><strong>Mots clés</strong> : bases de données relationnelles, API JDBC, SQLException.</p>
<p>Revenons sur l&#x27;architecture en couches de notre application :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005270000010B3CF3EB8F.png" style="display:inline-block; margin:4px;width:17.45cm;height:3.533cm;" /></td></tr></table>

<p>Les données nécessaires à l&#x27;élection sont enregistrées dans une base de données MySQL [dbelections]</p>
<h2 id="71-support">7.1. Support</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000543000001F8AA1FCF5F.png" style="display:inline-block; margin:4px;width:17.821cm;height:6.668cm;" /></td></tr></table>

<p>Le dossier [support / chap-07] [1] contient :</p>
<ul>
<li>les projets Eclipse de ce chapitre [2] ;</li>
<li>le script SQL de création de la base MySQL [dbelections] [3] ;</li>
</ul>
<h2 id="72-la-base-de-donnees-dbelections">7.2. La base de données [dbelections]</h2>
<p><strong>Travail à faire</strong> : créez la base MySQL [dblelections] en suivant la procédure suivie au paragraphe 6.4.2, page 85.</p>
<p>La base [dbelections] est une base MySQL avec deux tables :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000A60000004FE55D3DA1.png" style="display:inline-block; margin:4px;width:3.069cm;height:1.461cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La table [conf] contient les informations de configuration de l&#x27;élection :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000239000000BFCE24760F.png" style="display:inline-block; margin:4px;width:10.539cm;height:3.54cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<ul>
<li>[id] : clé primaire auto-incrémentée ;</li>
<li>[version] : n° de version de l&#x27;enregistrement - peut être ignoré ici ;</li>
<li>[sap] : nombre de sièges à pourvoir ;</li>
<li>[seuilelectoral] : la barre au-dessous de laquelle une liste est éliminée ;
Son contenu est le suivant :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001BE000000518D5261E4.png" style="display:inline-block; margin:4px;width:8.26cm;height:1.499cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La table [listes] contient les listes candidates de l&#x27;élection :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000224000000EFED15390F.png" style="display:inline-block; margin:4px;width:10.149cm;height:4.431cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<ul>
<li>[id] : clé primaire auto-incrémentée ;</li>
<li>[version] : n° de version de l&#x27;enregistrement - peut être ignoré ici ;</li>
<li>[nom] : nom de la liste ;</li>
<li>[voix] : voix de la liste - n&#x27;est connu qu&#x27;après saisie de l&#x27;utilisateur dans la couche [présentation] ;</li>
<li>[sieges] : nombre de sièges obtenus - n&#x27;est connu qu&#x27;après calcul de la couche [métier] ;</li>
<li>[elimine] : à 1 si la liste est éliminée, à 0 sinon - n&#x27;est connu qu&#x27;après calcul de la couche [métier] ;
Le contenu de la table [listes] est le suivant :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000101000000CD7E60F518.png" style="display:inline-block; margin:4px;width:4.761cm;height:3.799cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Le script SQL pour générer la base [dbelections] s&#x27;appelle [dbelections.sql] et est sur le serveur. Son code est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="o">--</span><span class="w"> </span><span class="n">phpMyAdmin</span><span class="w"> </span><span class="n">SQL</span><span class="w"> </span><span class="n">Dump</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="o">--</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">4.0.4</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="o">--</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="c1">//www.phpmyadmin.net</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="o">--</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="o">--</span><span class="w"> </span><span class="n">Client</span><span class="p">:</span><span class="w"> </span><span class="n">localhost</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="o">--</span><span class="w"> </span><span class="n">Généré</span><span class="w"> </span><span class="n">le</span><span class="p">:</span><span class="w"> </span><span class="n">Mer</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">Mars</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="n">à</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">20</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="o">--</span><span class="w"> </span><span class="n">Version</span><span class="w"> </span><span class="n">du</span><span class="w"> </span><span class="n">serveur</span><span class="p">:</span><span class="w"> </span><span class="mf">5.6.12</span><span class="o">-</span><span class="n">log</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="o">--</span><span class="w"> </span><span class="n">Version</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">PHP</span><span class="p">:</span><span class="w"> </span><span class="mf">5.4.12</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">SET</span><span class="w"> </span><span class="n">SQL_MODE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;NO_AUTO_VALUE_ON_ZERO&quot;</span><span class="p">;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="n">SET</span><span class="w"> </span><span class="n">time_zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;+00:00&quot;</span><span class="p">;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="cm">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="cm">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="cm">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span><span class="p">;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="cm">/*!40101 SET NAMES utf8 */</span><span class="p">;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="o">--</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="o">--</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">données</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">dbelections</span><span class="err">`</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="o">--</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="n">CREATE</span><span class="w"> </span><span class="n">DATABASE</span><span class="w"> </span><span class="n">IF</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">EXISTS</span><span class="w"> </span><span class="err">`</span><span class="n">dbelections</span><span class="err">`</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">CHARACTER</span><span class="w"> </span><span class="n">SET</span><span class="w"> </span><span class="n">utf8</span><span class="w"> </span><span class="n">COLLATE</span><span class="w"> </span><span class="n">utf8_swedish_ci</span><span class="p">;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="n">USE</span><span class="w"> </span><span class="err">`</span><span class="n">dbelections</span><span class="err">`</span><span class="p">;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="o">--</span><span class="w"> </span><span class="o">--------------------------------------------------------</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="o">--</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="o">--</span><span class="w"> </span><span class="n">Structure</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="err">`</span><span class="n">conf</span><span class="err">`</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="o">--</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="n">CREATE</span><span class="w"> </span><span class="n">TABLE</span><span class="w"> </span><span class="n">IF</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">EXISTS</span><span class="w"> </span><span class="err">`</span><span class="n">conf</span><span class="err">`</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">  </span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="w"> </span><span class="n">bigint</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">  </span><span class="err">`</span><span class="n">version</span><span class="err">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">,</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">  </span><span class="err">`</span><span class="n">sap</span><span class="err">`</span><span class="w"> </span><span class="n">tinyint</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">  </span><span class="err">`</span><span class="n">seuilelectoral</span><span class="err">`</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">  </span><span class="n">PRIMARY</span><span class="w"> </span><span class="nf">KEY</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w">  </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="w"> </span><span class="n">COLLATE</span><span class="o">=</span><span class="n">utf8_swedish_ci</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="o">--</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="o">--</span><span class="w"> </span><span class="n">Contenu</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="err">`</span><span class="n">conf</span><span class="err">`</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="o">--</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="n">INSERT</span><span class="w"> </span><span class="n">INTO</span><span class="w"> </span><span class="err">`</span><span class="n">conf</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">version</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">sap</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">seuilelectoral</span><span class="err">`</span><span class="p">)</span><span class="w"> </span><span class="n">VALUES</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">);</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="o">--</span><span class="w"> </span><span class="o">--------------------------------------------------------</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="o">--</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="o">--</span><span class="w"> </span><span class="n">Structure</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="err">`</span><span class="n">listes</span><span class="err">`</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="o">--</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="n">CREATE</span><span class="w"> </span><span class="n">TABLE</span><span class="w"> </span><span class="n">IF</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">EXISTS</span><span class="w"> </span><span class="err">`</span><span class="n">listes</span><span class="err">`</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">  </span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="w"> </span><span class="n">bigint</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">  </span><span class="err">`</span><span class="n">version</span><span class="err">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">,</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="w">  </span><span class="err">`</span><span class="n">nom</span><span class="err">`</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="n">COLLATE</span><span class="w"> </span><span class="n">utf8_swedish_ci</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">  </span><span class="err">`</span><span class="n">voix</span><span class="err">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">  </span><span class="err">`</span><span class="n">sieges</span><span class="err">`</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="p">,</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">  </span><span class="err">`</span><span class="n">elimine</span><span class="err">`</span><span class="w"> </span><span class="n">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">NULL</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">,</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">  </span><span class="n">PRIMARY</span><span class="w"> </span><span class="nf">KEY</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="p">),</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="w">  </span><span class="n">UNIQUE</span><span class="w"> </span><span class="n">KEY</span><span class="w"> </span><span class="err">`</span><span class="n">nom</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">nom</span><span class="err">`</span><span class="p">)</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="w">  </span><span class="n">DEFAULT</span><span class="w"> </span><span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8</span><span class="w"> </span><span class="n">COLLATE</span><span class="o">=</span><span class="n">utf8_swedish_ci</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">8</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="o">--</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="o">--</span><span class="w"> </span><span class="n">Contenu</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="err">`</span><span class="n">listes</span><span class="err">`</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="o">--</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="n">INSERT</span><span class="w"> </span><span class="n">INTO</span><span class="w"> </span><span class="err">`</span><span class="n">listes</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="err">`</span><span class="n">id</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">version</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">nom</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">voix</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">sieges</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="err">`</span><span class="n">elimine</span><span class="err">`</span><span class="p">)</span><span class="w"> </span><span class="n">VALUES</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;C&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;D&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;E&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;F&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;G&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="cm">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="cm">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="cm">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h2 id="73-le-projet-eclipse">7.3. Le projet Eclipse</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005250000011170996311.png" style="display:inline-block; margin:4px;width:17.424cm;height:3.612cm;" /></td></tr></table>

<p>Le projet Eclipse de la couche [DAO] sera le suivant :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000013B0000013B850721FB.png" style="display:inline-block; margin:4px;width:5.83cm;height:5.83cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<ul>
<li>le package [elections.dao.entities] contient les objets manipulés par la couche [DAO] ;</li>
<li>le package [elections.dao.service] contient l&#x27;implémentation de la couche [DAO] ;</li>
<li>le package [elections.dao.config] contient la configuration de la couche [DAO]</li>
<li>le package [elections.dao.junit] contient une classe de test JUnit du projet ;</li>
<li>le package [elections.dao.console] contient une classe exécutable de test ;</li>
</ul>
<h2 id="74-configuration-du-projet-maven">7.4. Configuration du projet Maven</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000142000000E016C40EC7.png" style="display:inline-block; margin:4px;width:5.96cm;height:4.15cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Le fichier [pom.xml] qui configure le projet Maven est le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span>
<span class="normal"><a href="#__codelineno-1-39">39</a></span>
<span class="normal"><a href="#__codelineno-1-40">40</a></span>
<span class="normal"><a href="#__codelineno-1-41">41</a></span>
<span class="normal"><a href="#__codelineno-1-42">42</a></span>
<span class="normal"><a href="#__codelineno-1-43">43</a></span>
<span class="normal"><a href="#__codelineno-1-44">44</a></span>
<span class="normal"><a href="#__codelineno-1-45">45</a></span>
<span class="normal"><a href="#__codelineno-1-46">46</a></span>
<span class="normal"><a href="#__codelineno-1-47">47</a></span>
<span class="normal"><a href="#__codelineno-1-48">48</a></span>
<span class="normal"><a href="#__codelineno-1-49">49</a></span>
<span class="normal"><a href="#__codelineno-1-50">50</a></span>
<span class="normal"><a href="#__codelineno-1-51">51</a></span>
<span class="normal"><a href="#__codelineno-1-52">52</a></span>
<span class="normal"><a href="#__codelineno-1-53">53</a></span>
<span class="normal"><a href="#__codelineno-1-54">54</a></span>
<span class="normal"><a href="#__codelineno-1-55">55</a></span>
<span class="normal"><a href="#__codelineno-1-56">56</a></span>
<span class="normal"><a href="#__codelineno-1-57">57</a></span>
<span class="normal"><a href="#__codelineno-1-58">58</a></span>
<span class="normal"><a href="#__codelineno-1-59">59</a></span>
<span class="normal"><a href="#__codelineno-1-60">60</a></span>
<span class="normal"><a href="#__codelineno-1-61">61</a></span>
<span class="normal"><a href="#__codelineno-1-62">62</a></span>
<span class="normal"><a href="#__codelineno-1-63">63</a></span>
<span class="normal"><a href="#__codelineno-1-64">64</a></span>
<span class="normal"><a href="#__codelineno-1-65">65</a></span>
<span class="normal"><a href="#__codelineno-1-66">66</a></span>
<span class="normal"><a href="#__codelineno-1-67">67</a></span>
<span class="normal"><a href="#__codelineno-1-68">68</a></span>
<span class="normal"><a href="#__codelineno-1-69">69</a></span>
<span class="normal"><a href="#__codelineno-1-70">70</a></span>
<span class="normal"><a href="#__codelineno-1-71">71</a></span>
<span class="normal"><a href="#__codelineno-1-72">72</a></span>
<span class="normal"><a href="#__codelineno-1-73">73</a></span>
<span class="normal"><a href="#__codelineno-1-74">74</a></span>
<span class="normal"><a href="#__codelineno-1-75">75</a></span>
<span class="normal"><a href="#__codelineno-1-76">76</a></span>
<span class="normal"><a href="#__codelineno-1-77">77</a></span>
<span class="normal"><a href="#__codelineno-1-78">78</a></span>
<span class="normal"><a href="#__codelineno-1-79">79</a></span>
<span class="normal"><a href="#__codelineno-1-80">80</a></span>
<span class="normal"><a href="#__codelineno-1-81">81</a></span>
<span class="normal"><a href="#__codelineno-1-82">82</a></span>
<span class="normal"><a href="#__codelineno-1-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="o">&lt;</span><span class="n">project</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">modelVersion</span><span class="o">&gt;</span><span class="mf">4.0.0</span><span class="o">&lt;/</span><span class="n">modelVersion</span><span class="o">&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">istia</span><span class="p">.</span><span class="na">st</span><span class="p">.</span><span class="na">elections</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">elections</span><span class="o">-</span><span class="n">dao</span><span class="o">-</span><span class="n">jdbc</span><span class="o">-</span><span class="mo">01</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">parent</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.2.7</span><span class="p">.</span><span class="na">RELEASE</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">project</span><span class="p">.</span><span class="na">build</span><span class="p">.</span><span class="na">sourceEncoding</span><span class="o">&gt;</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="o">&lt;/</span><span class="n">project</span><span class="p">.</span><span class="na">build</span><span class="p">.</span><span class="na">sourceEncoding</span><span class="o">&gt;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">java</span><span class="p">.</span><span class="na">version</span><span class="o">&gt;</span><span class="mf">1.8</span><span class="o">&lt;/</span><span class="n">java</span><span class="p">.</span><span class="na">version</span><span class="o">&gt;</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">mysql</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="n">java</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">context</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Tomcat</span><span class="w"> </span><span class="n">Jdbc</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">tomcat</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">tomcat</span><span class="o">-</span><span class="n">jdbc</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">bibliothèque</span><span class="w"> </span><span class="n">jSON</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-37" name="__codelineno-1-37"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="p">.</span><span class="na">fasterxml</span><span class="p">.</span><span class="na">jackson</span><span class="p">.</span><span class="na">core</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">jackson</span><span class="o">-</span><span class="n">databind</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
<a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-46" name="__codelineno-1-46"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-49" name="__codelineno-1-49"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-50" name="__codelineno-1-50"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
<a id="__codelineno-1-51" name="__codelineno-1-51"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Logging</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-53" name="__codelineno-1-53"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-55" name="__codelineno-1-55"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">logging</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-56" name="__codelineno-1-56"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-1-58" name="__codelineno-1-58"></a>
<a id="__codelineno-1-59" name="__codelineno-1-59"></a><span class="w">    </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">plugins</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-60" name="__codelineno-1-60"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-1-62" name="__codelineno-1-62"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-1-63" name="__codelineno-1-63"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">assembly</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-64" name="__codelineno-1-64"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-1-65" name="__codelineno-1-65"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-1-66" name="__codelineno-1-66"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-1-67" name="__codelineno-1-67"></a><span class="w">                            </span><span class="o">&lt;</span><span class="n">mainClass</span><span class="o">&gt;</span><span class="n">config</span><span class="p">.</span><span class="na">AppConfig</span><span class="o">&lt;/</span><span class="n">mainClass</span><span class="o">&gt;</span>
<a id="__codelineno-1-68" name="__codelineno-1-68"></a><span class="w">                        </span><span class="o">&lt;/</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-1-69" name="__codelineno-1-69"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-1-70" name="__codelineno-1-70"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-1-71" name="__codelineno-1-71"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">descriptorRef</span><span class="o">&gt;</span><span class="n">jar</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">dependencies</span><span class="o">&lt;/</span><span class="n">descriptorRef</span><span class="o">&gt;</span>
<a id="__codelineno-1-72" name="__codelineno-1-72"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-1-73" name="__codelineno-1-73"></a><span class="w">                </span><span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-1-74" name="__codelineno-1-74"></a><span class="w">            </span><span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-1-75" name="__codelineno-1-75"></a><span class="w">            </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">pour</span><span class="w"> </span><span class="n">l</span><span class="err">&#39;</span><span class="n">installation</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">l</span><span class="err">&#39;</span><span class="n">artifact</span><span class="w"> </span><span class="n">du</span><span class="w"> </span><span class="n">projet</span><span class="w"> </span><span class="n">dans</span><span class="w"> </span><span class="n">le</span><span class="w"> </span><span class="n">dépôt</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">Maven</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-1-76" name="__codelineno-1-76"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-1-77" name="__codelineno-1-77"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">maven</span><span class="p">.</span><span class="na">plugins</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-1-78" name="__codelineno-1-78"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">surefire</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-1-79" name="__codelineno-1-79"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">2.18.1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-1-80" name="__codelineno-1-80"></a><span class="w">            </span><span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-1-81" name="__codelineno-1-81"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-1-82" name="__codelineno-1-82"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-1-83" name="__codelineno-1-83"></a><span class="o">&lt;/</span><span class="n">project</span><span class="o">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Ce fichier est analogue à celui décrit au paragraphe 6.5.1, page 94. On y a apporté les modifications suivantes :</p>
<ul>
<li>lignes 8-12 : on a défini un projet Maven parent. Le projet [spring-boot-starter-parent] (ligne 10) définit un très grand nombre de dépendances avec leurs versions. Lorsqu&#x27;on utilise l&#x27;une d&#x27;elles (lignes 19-57), il est alors inutile d&#x27;en préciser la version, celle-ci étant définie dans le projet Maven parent ;</li>
<li>lignes 40-51 : dépendances nécessaires à la classe de test du projet. Ces dépendances ont l&#x27;attribut [&lt;scope&gt;test&lt;/scope&gt;] qui signifie qu&#x27;elles ne sont nécessaires que pour les classes du dossier [src / test / java]. Ces dépendances ne seront pas incluses dans l&#x27;archive finale du projet ;</li>
<li>lignes 53-56 : la bibliothèque [spring-boot-starter-logging] sera utilisée par Spring pour faire des logs à l&#x27;écran ;</li>
<li>lignes 14-17 : des propriétés de configuration Maven :</li>
<li>ligne 15 : indique que les fichiers source sont codés en UTF-8 ;</li>
<li>ligne 16 : indique que le compilateur à utiliser doit être de niveau 1.8 ;</li>
</ul>
<h2 id="75-les-entites-de-la-couche-dao">7.5. Les entités de la couche [DAO]</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000128000000CBA7F86E43.png" style="display:inline-block; margin:4px;width:5.48cm;height:3.761cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<ul>
<li>[ElectionsConfig] est le modèle objet associé à une ligne de la table [CONF] ;</li>
<li>[ListeElectorale] est le modèle objet associé à une ligne de la table [LISTES] ;</li>
<li>[AbstactEntity] est la classe parent des deux classes précédentes. Elle factorise les champs [id, version] communs aux deux classes ;</li>
<li>[ElectionsException] est une classe d&#x27;exception ;</li>
</ul>
<h3 id="751-la-classe-electionsexception">7.5.1. La classe [ElectionsException]</h3>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000128000000CB4ED74EBE.png" style="display:inline-block; margin:4px;width:5.48cm;height:3.761cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [ElectionsException] a été décrite au paragraphe 4.3, page 39. Nous redonnons son code :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span>
<span class="normal"><a href="#__codelineno-2-39">39</a></span>
<span class="normal"><a href="#__codelineno-2-40">40</a></span>
<span class="normal"><a href="#__codelineno-2-41">41</a></span>
<span class="normal"><a href="#__codelineno-2-42">42</a></span>
<span class="normal"><a href="#__codelineno-2-43">43</a></span>
<span class="normal"><a href="#__codelineno-2-44">44</a></span>
<span class="normal"><a href="#__codelineno-2-45">45</a></span>
<span class="normal"><a href="#__codelineno-2-46">46</a></span>
<span class="normal"><a href="#__codelineno-2-47">47</a></span>
<span class="normal"><a href="#__codelineno-2-48">48</a></span>
<span class="normal"><a href="#__codelineno-2-49">49</a></span>
<span class="normal"><a href="#__codelineno-2-50">50</a></span>
<span class="normal"><a href="#__codelineno-2-51">51</a></span>
<span class="normal"><a href="#__codelineno-2-52">52</a></span>
<span class="normal"><a href="#__codelineno-2-53">53</a></span>
<span class="normal"><a href="#__codelineno-2-54">54</a></span>
<span class="normal"><a href="#__codelineno-2-55">55</a></span>
<span class="normal"><a href="#__codelineno-2-56">56</a></span>
<span class="normal"><a href="#__codelineno-2-57">57</a></span>
<span class="normal"><a href="#__codelineno-2-58">58</a></span>
<span class="normal"><a href="#__codelineno-2-59">59</a></span>
<span class="normal"><a href="#__codelineno-2-60">60</a></span>
<span class="normal"><a href="#__codelineno-2-61">61</a></span>
<span class="normal"><a href="#__codelineno-2-62">62</a></span>
<span class="normal"><a href="#__codelineno-2-63">63</a></span>
<span class="normal"><a href="#__codelineno-2-64">64</a></span>
<span class="normal"><a href="#__codelineno-2-65">65</a></span>
<span class="normal"><a href="#__codelineno-2-66">66</a></span>
<span class="normal"><a href="#__codelineno-2-67">67</a></span>
<span class="normal"><a href="#__codelineno-2-68">68</a></span>
<span class="normal"><a href="#__codelineno-2-69">69</a></span>
<span class="normal"><a href="#__codelineno-2-70">70</a></span>
<span class="normal"><a href="#__codelineno-2-71">71</a></span>
<span class="normal"><a href="#__codelineno-2-72">72</a></span>
<span class="normal"><a href="#__codelineno-2-73">73</a></span>
<span class="normal"><a href="#__codelineno-2-74">74</a></span>
<span class="normal"><a href="#__codelineno-2-75">75</a></span>
<span class="normal"><a href="#__codelineno-2-76">76</a></span>
<span class="normal"><a href="#__codelineno-2-77">77</a></span>
<span class="normal"><a href="#__codelineno-2-78">78</a></span>
<span class="normal"><a href="#__codelineno-2-79">79</a></span>
<span class="normal"><a href="#__codelineno-2-80">80</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">...</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="c1">// classe d&#39;exception pour l&#39;application Elections</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="c1">// l&#39;exception est non contrôlée</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ElectionsException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="c1">// serial ID</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1L</span><span class="p">;</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="c1">// champs locaux</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">erreurs</span><span class="p">;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="c1">// constructeurs</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsException</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">        </span><span class="kd">super</span><span class="p">();</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsException</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">        </span><span class="c1">// local</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getErreursForException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsException</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="w">        </span><span class="c1">// local</span>
<a id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
<a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getErreursForException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-39" name="__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsException</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-2-43" name="__codelineno-2-43"></a><span class="w">        </span><span class="c1">// local</span>
<a id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
<a id="__codelineno-2-45" name="__codelineno-2-45"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="w">        </span><span class="n">erreurs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-2-47" name="__codelineno-2-47"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">erreurs</span><span class="p">;</span>
<a id="__codelineno-2-48" name="__codelineno-2-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-49" name="__codelineno-2-49"></a>
<a id="__codelineno-2-50" name="__codelineno-2-50"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsException</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">erreurs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-51" name="__codelineno-2-51"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-2-52" name="__codelineno-2-52"></a><span class="w">        </span><span class="kd">super</span><span class="p">();</span>
<a id="__codelineno-2-53" name="__codelineno-2-53"></a><span class="w">        </span><span class="c1">// local</span>
<a id="__codelineno-2-54" name="__codelineno-2-54"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">code</span><span class="p">;</span>
<a id="__codelineno-2-55" name="__codelineno-2-55"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">erreurs</span><span class="p">;</span>
<a id="__codelineno-2-56" name="__codelineno-2-56"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-57" name="__codelineno-2-57"></a>
<a id="__codelineno-2-58" name="__codelineno-2-58"></a><span class="w">    </span><span class="c1">// liste des messages d&#39;erreur d&#39;une exception</span>
<a id="__codelineno-2-59" name="__codelineno-2-59"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getErreursForException</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">th</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-60" name="__codelineno-2-60"></a><span class="w">        </span><span class="c1">// on récupère la liste des messages d&#39;erreur de l&#39;exception</span>
<a id="__codelineno-2-61" name="__codelineno-2-61"></a><span class="w">        </span><span class="n">Throwable</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">th</span><span class="p">;</span>
<a id="__codelineno-2-62" name="__codelineno-2-62"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-2-63" name="__codelineno-2-63"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cause</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-64" name="__codelineno-2-64"></a><span class="w">            </span><span class="c1">// on récupère le message seulement s&#39;il est !=null et non blanc</span>
<a id="__codelineno-2-65" name="__codelineno-2-65"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cause</span><span class="p">.</span><span class="na">getMessage</span><span class="p">();</span>
<a id="__codelineno-2-66" name="__codelineno-2-66"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-67" name="__codelineno-2-67"></a><span class="w">                </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="na">trim</span><span class="p">();</span>
<a id="__codelineno-2-68" name="__codelineno-2-68"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-69" name="__codelineno-2-69"></a><span class="w">                    </span><span class="n">erreurs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-2-70" name="__codelineno-2-70"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-2-71" name="__codelineno-2-71"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-2-72" name="__codelineno-2-72"></a><span class="w">            </span><span class="c1">// cause suivante</span>
<a id="__codelineno-2-73" name="__codelineno-2-73"></a><span class="w">            </span><span class="n">cause</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cause</span><span class="p">.</span><span class="na">getCause</span><span class="p">();</span>
<a id="__codelineno-2-74" name="__codelineno-2-74"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-2-75" name="__codelineno-2-75"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">erreurs</span><span class="p">;</span>
<a id="__codelineno-2-76" name="__codelineno-2-76"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-77" name="__codelineno-2-77"></a>
<a id="__codelineno-2-78" name="__codelineno-2-78"></a><span class="w">    </span><span class="c1">// getters et setters</span>
<a id="__codelineno-2-79" name="__codelineno-2-79"></a><span class="p">...</span>
<a id="__codelineno-2-80" name="__codelineno-2-80"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Un objet [ElectionsException] est caractérisé par deux informations :</p>
<ul>
<li>ligne 16 : un code d&#x27;erreur ;</li>
<li>ligne 17 : une liste de messages d&#x27;erreur associés à la pile des exceptions qui se sont produites ;</li>
<li>la classe a 5 constructeurs (lignes 20, 24, 32, 40, 50) ;</li>
<li>lignes 59-76 : la méthode [getErreursForException] permet de récupérer les messages d&#x27;erreur de la pile d&#x27;exceptions ;</li>
</ul>
<h3 id="752-la-classe-abstractentity">7.5.2. La classe [AbstractEntity]</h3>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000128000000CBC48C394C.png" style="display:inline-block; margin:4px;width:5.48cm;height:3.759cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [AbstractEntity] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.entities</span><span class="p">;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.core.JsonProcessingException</span><span class="p">;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.databind.ObjectMapper</span><span class="p">;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AbstractEntity</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1L</span><span class="p">;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="c1">// champs</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">version</span><span class="p">;</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="c1">// constructeurs</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">AbstractEntity</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">AbstractEntity</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">version</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">version</span><span class="p">;</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="w">    </span><span class="c1">// signature</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectMapper</span><span class="p">().</span><span class="na">writeValueAsString</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">JsonProcessingException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a><span class="w">    </span><span class="c1">// getters et setters</span>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="p">...</span>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Elle mémorise les champs [ID, NOM] des lignes des tables [CONF] et [LISTES] (lignes 8-9).</p>
<ul>
<li>ligne 8 : la classe a l&#x27;attribut [Abstract] indiquant qu&#x27;elle ne peut être instanciée. Elle ne peut être que dérivée ;</li>
<li>lignes 26-33 : signature jSON de l&#x27;objet ;</li>
<li>ligne 28 : on retourne la chaîne jSON de [this]. Si au moment de l&#x27;exécution, [this] représente un objet dérivé de [AbstactEntity], c&#x27;est la chaîne jSON de l&#x27;objet dérivé qui est obtenue. Les classes dérivées n&#x27;auront ainsi pas besoin de définir une méthode [toString]. Celle de la classe parent est suffisante ;</li>
</ul>
<h3 id="753-la-classe-electionsconfig">7.5.3. La classe [ElectionsConfig]</h3>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000128000000CBD98166F6.png" style="display:inline-block; margin:4px;width:5.48cm;height:3.759cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [ElectionsConfig] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.entities</span><span class="p">;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ElectionsConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractEntity</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1L</span><span class="p">;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="c1">// champs</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="p">;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="p">;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">    </span><span class="c1">// constructeurs</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsConfig</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ElectionsConfig</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">        </span><span class="c1">// champs locaux</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">nbSiegesAPourvoir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="p">;</span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">seuilElectoral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="p">;</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">    </span><span class="c1">// getters et setters</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="p">...</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 4 : la classe étend la classe [AbstractEntity] ;</li>
<li>lignes 8-9 : mémorisent les informations des colonnes [SAP, SEUILELECTORAL] de la table [CONF] ;</li>
</ul>
<h3 id="754-la-classe-listeelectorale">7.5.4. La classe [ListeElectorale]</h3>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000128000000CBABF9AE30.png" style="display:inline-block; margin:4px;width:5.48cm;height:3.759cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [ListeElectorale] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span>
<span class="normal"><a href="#__codelineno-5-41">41</a></span>
<span class="normal"><a href="#__codelineno-5-42">42</a></span>
<span class="normal"><a href="#__codelineno-5-43">43</a></span>
<span class="normal"><a href="#__codelineno-5-44">44</a></span>
<span class="normal"><a href="#__codelineno-5-45">45</a></span>
<span class="normal"><a href="#__codelineno-5-46">46</a></span>
<span class="normal"><a href="#__codelineno-5-47">47</a></span>
<span class="normal"><a href="#__codelineno-5-48">48</a></span>
<span class="normal"><a href="#__codelineno-5-49">49</a></span>
<span class="normal"><a href="#__codelineno-5-50">50</a></span>
<span class="normal"><a href="#__codelineno-5-51">51</a></span>
<span class="normal"><a href="#__codelineno-5-52">52</a></span>
<span class="normal"><a href="#__codelineno-5-53">53</a></span>
<span class="normal"><a href="#__codelineno-5-54">54</a></span>
<span class="normal"><a href="#__codelineno-5-55">55</a></span>
<span class="normal"><a href="#__codelineno-5-56">56</a></span>
<span class="normal"><a href="#__codelineno-5-57">57</a></span>
<span class="normal"><a href="#__codelineno-5-58">58</a></span>
<span class="normal"><a href="#__codelineno-5-59">59</a></span>
<span class="normal"><a href="#__codelineno-5-60">60</a></span>
<span class="normal"><a href="#__codelineno-5-61">61</a></span>
<span class="normal"><a href="#__codelineno-5-62">62</a></span>
<span class="normal"><a href="#__codelineno-5-63">63</a></span>
<span class="normal"><a href="#__codelineno-5-64">64</a></span>
<span class="normal"><a href="#__codelineno-5-65">65</a></span>
<span class="normal"><a href="#__codelineno-5-66">66</a></span>
<span class="normal"><a href="#__codelineno-5-67">67</a></span>
<span class="normal"><a href="#__codelineno-5-68">68</a></span>
<span class="normal"><a href="#__codelineno-5-69">69</a></span>
<span class="normal"><a href="#__codelineno-5-70">70</a></span>
<span class="normal"><a href="#__codelineno-5-71">71</a></span>
<span class="normal"><a href="#__codelineno-5-72">72</a></span>
<span class="normal"><a href="#__codelineno-5-73">73</a></span>
<span class="normal"><a href="#__codelineno-5-74">74</a></span>
<span class="normal"><a href="#__codelineno-5-75">75</a></span>
<span class="normal"><a href="#__codelineno-5-76">76</a></span>
<span class="normal"><a href="#__codelineno-5-77">77</a></span>
<span class="normal"><a href="#__codelineno-5-78">78</a></span>
<span class="normal"><a href="#__codelineno-5-79">79</a></span>
<span class="normal"><a href="#__codelineno-5-80">80</a></span>
<span class="normal"><a href="#__codelineno-5-81">81</a></span>
<span class="normal"><a href="#__codelineno-5-82">82</a></span>
<span class="normal"><a href="#__codelineno-5-83">83</a></span>
<span class="normal"><a href="#__codelineno-5-84">84</a></span>
<span class="normal"><a href="#__codelineno-5-85">85</a></span>
<span class="normal"><a href="#__codelineno-5-86">86</a></span>
<span class="normal"><a href="#__codelineno-5-87">87</a></span>
<span class="normal"><a href="#__codelineno-5-88">88</a></span>
<span class="normal"><a href="#__codelineno-5-89">89</a></span>
<span class="normal"><a href="#__codelineno-5-90">90</a></span>
<span class="normal"><a href="#__codelineno-5-91">91</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.entities</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ListeElectorale</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractEntity</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="c1">// champs</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sieges</span><span class="p">;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="c1">// constructeurs</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ListeElectorale</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ListeElectorale</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sieges</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">        </span><span class="kd">super</span><span class="p">();</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">        </span><span class="c1">// champs locaux</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">        </span><span class="n">initNom</span><span class="p">(</span><span class="n">nom</span><span class="p">);</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">        </span><span class="n">initVoix</span><span class="p">(</span><span class="n">voix</span><span class="p">);</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">        </span><span class="n">initSieges</span><span class="p">(</span><span class="n">sieges</span><span class="p">);</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">elimine</span><span class="o">=</span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ListeElectorale</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">version</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">sieges</span><span class="p">,</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">        </span><span class="c1">// parent</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">);</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="w">        </span><span class="c1">// champs locaux</span>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="w">        </span><span class="n">initNom</span><span class="p">(</span><span class="n">nom</span><span class="p">);</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">        </span><span class="n">initVoix</span><span class="p">(</span><span class="n">voix</span><span class="p">);</span>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="w">        </span><span class="n">initSieges</span><span class="p">(</span><span class="n">sieges</span><span class="p">);</span>
<a id="__codelineno-5-32" name="__codelineno-5-32"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">elimine</span><span class="o">=</span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-5-33" name="__codelineno-5-33"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a>
<a id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="w">    </span><span class="c1">// méthodes privées</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initNom</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">nom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nom</span><span class="p">.</span><span class="na">trim</span><span class="p">();</span>
<a id="__codelineno-5-38" name="__codelineno-5-38"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">nom</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-39" name="__codelineno-5-39"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ElectionsException</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Le nom ne peut être vide&quot;</span><span class="p">);</span>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-42" name="__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initVoix</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">voix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">voix</span><span class="p">;</span>
<a id="__codelineno-5-45" name="__codelineno-5-45"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">voix</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-46" name="__codelineno-5-46"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ElectionsException</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Le nombre de voix ne peut être &lt;0&quot;</span><span class="p">);</span>
<a id="__codelineno-5-47" name="__codelineno-5-47"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-48" name="__codelineno-5-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-49" name="__codelineno-5-49"></a>
<a id="__codelineno-5-50" name="__codelineno-5-50"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initSieges</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sieges</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-51" name="__codelineno-5-51"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">sieges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sieges</span><span class="p">;</span>
<a id="__codelineno-5-52" name="__codelineno-5-52"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sieges</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-53" name="__codelineno-5-53"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ElectionsException</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Le nombre de sièges ne peut être &lt;0&quot;</span><span class="p">);</span>
<a id="__codelineno-5-54" name="__codelineno-5-54"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-55" name="__codelineno-5-55"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-56" name="__codelineno-5-56"></a>
<a id="__codelineno-5-57" name="__codelineno-5-57"></a><span class="w">    </span><span class="c1">// getters et setters</span>
<a id="__codelineno-5-58" name="__codelineno-5-58"></a>
<a id="__codelineno-5-59" name="__codelineno-5-59"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getNom</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-60" name="__codelineno-5-60"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">nom</span><span class="p">;</span>
<a id="__codelineno-5-61" name="__codelineno-5-61"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-62" name="__codelineno-5-62"></a>
<a id="__codelineno-5-63" name="__codelineno-5-63"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setNom</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">nom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-64" name="__codelineno-5-64"></a><span class="w">        </span><span class="n">initNom</span><span class="p">(</span><span class="n">nom</span><span class="p">);</span>
<a id="__codelineno-5-65" name="__codelineno-5-65"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-66" name="__codelineno-5-66"></a>
<a id="__codelineno-5-67" name="__codelineno-5-67"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getVoix</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-68" name="__codelineno-5-68"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">voix</span><span class="p">;</span>
<a id="__codelineno-5-69" name="__codelineno-5-69"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-70" name="__codelineno-5-70"></a>
<a id="__codelineno-5-71" name="__codelineno-5-71"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setVoix</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-72" name="__codelineno-5-72"></a><span class="w">        </span><span class="n">initVoix</span><span class="p">(</span><span class="n">voix</span><span class="p">);</span>
<a id="__codelineno-5-73" name="__codelineno-5-73"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-74" name="__codelineno-5-74"></a>
<a id="__codelineno-5-75" name="__codelineno-5-75"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getSieges</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-76" name="__codelineno-5-76"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sieges</span><span class="p">;</span>
<a id="__codelineno-5-77" name="__codelineno-5-77"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-78" name="__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setSieges</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sieges</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-80" name="__codelineno-5-80"></a><span class="w">        </span><span class="n">initSieges</span><span class="p">(</span><span class="n">sieges</span><span class="p">);</span>
<a id="__codelineno-5-81" name="__codelineno-5-81"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-82" name="__codelineno-5-82"></a>
<a id="__codelineno-5-83" name="__codelineno-5-83"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isElimine</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-84" name="__codelineno-5-84"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-5-85" name="__codelineno-5-85"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-86" name="__codelineno-5-86"></a>
<a id="__codelineno-5-87" name="__codelineno-5-87"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setElimine</span><span class="p">(</span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-88" name="__codelineno-5-88"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-5-89" name="__codelineno-5-89"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-90" name="__codelineno-5-90"></a>
<a id="__codelineno-5-91" name="__codelineno-5-91"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 3 : la classe étend la classe [AbstractEntity] ;</li>
<li>lignes 6-9 : la classe mémorise les colonnes [NOM, VOIX, SIEGES, ELIMINE] de la table [LISTES] ;</li>
</ul>
<h2 id="76-configuration-spring-de-la-couche-dao">7.6. Configuration Spring de la couche [DAO]</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005170000010DBE71959B.png" style="display:inline-block; margin:4px;width:17.238cm;height:3.56cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000013B000000C19F3287BB.png" style="display:inline-block; margin:4px;width:5.83cm;height:3.57cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [AppConfig] est une classe de configuration Spring qui configure l&#x27;accès à la base de données de la façon suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span>
<span class="normal"><a href="#__codelineno-6-35">35</a></span>
<span class="normal"><a href="#__codelineno-6-36">36</a></span>
<span class="normal"><a href="#__codelineno-6-37">37</a></span>
<span class="normal"><a href="#__codelineno-6-38">38</a></span>
<span class="normal"><a href="#__codelineno-6-39">39</a></span>
<span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.config</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.tomcat.jdbc.pool.DataSource</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.cache.CacheManager</span><span class="p">;</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.cache.annotation.EnableCaching</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.cache.concurrent.ConcurrentMapCacheManager</span><span class="p">;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="p">;</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="nd">@ComponentScan</span><span class="p">(</span><span class="n">basePackages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;elections.dao.service&quot;</span><span class="w"> </span><span class="p">})</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="nd">@EnableCaching</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="c1">// constantes</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:mysql://localhost:3306/dbelections&quot;</span><span class="p">;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">USER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;root&quot;</span><span class="p">;</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">PASSWD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">DRIVER_CLASSNAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com.mysql.jdbc.Driver&quot;</span><span class="p">;</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">SELECT_LISTES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT ID, VERSION, NOM, VOIX, SIEGES, ELIMINE FROM LISTES&quot;</span><span class="p">;</span>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">SELECT_CONF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SELECT ID, VERSION, SAP, SEUILELECTORAL, SAP FROM CONF&quot;</span><span class="p">;</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">UPDATE_LISTES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;UPDATE LISTES SET VOIX=?, SIEGES=?, ELIMINE=? WHERE ID=?&quot;</span><span class="p">;</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">    </span><span class="nd">@Bean</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="nf">dataSource</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">        </span><span class="c1">// source de données TomcatJdbc</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">        </span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataSource</span><span class="p">();</span>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="w">        </span><span class="c1">// configuration accès JDBC</span>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setDriverClassName</span><span class="p">(</span><span class="n">DRIVER_CLASSNAME</span><span class="p">);</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setUsername</span><span class="p">(</span><span class="n">USER</span><span class="p">);</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setPassword</span><span class="p">(</span><span class="n">PASSWD</span><span class="p">);</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setUrl</span><span class="p">(</span><span class="n">URL</span><span class="p">);</span>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a><span class="w">        </span><span class="c1">// une connexion ouverte initialement</span>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="w">        </span><span class="n">dataSource</span><span class="p">.</span><span class="na">setInitialSize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-6-35" name="__codelineno-6-35"></a><span class="w">        </span><span class="c1">// résultat</span>
<a id="__codelineno-6-36" name="__codelineno-6-36"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">dataSource</span><span class="p">;</span>
<a id="__codelineno-6-37" name="__codelineno-6-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-38" name="__codelineno-6-38"></a>
<a id="__codelineno-6-39" name="__codelineno-6-39"></a><span class="w">    </span><span class="nd">@Bean</span>
<a id="__codelineno-6-40" name="__codelineno-6-40"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">CacheManager</span><span class="w"> </span><span class="nf">cacheManager</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentMapCacheManager</span><span class="p">(</span><span class="s">&quot;electionsConfig&quot;</span><span class="p">);</span>
<a id="__codelineno-6-42" name="__codelineno-6-42"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 25-38 : l&#x27;accès à la BD se fera via une source de données [tomcat-jdbc]. Ce type de source a été utilisée et expliquée au paragraphe 6.5, page 94 ;</li>
<li>lignes 17-23 : un ensemble de constantes statiques accessibles par toutes les classes du projet ;</li>
<li>ligne 13 : l&#x27;annotation [@Configuration] fait de la classe [AppConfig] une classe de configuration Spring ;</li>
<li>ligne 11 : l&#x27;annotation [@ComponentScan] indique les packages où on peut trouver des objets Spring. Ici, nous allons définir un objet Spring dans le package [dao]. L&#x27;annotation [@ComponentScan] fait de la classe une classe de configuration qui nous épargne de mettre l&#x27;annotation [@Configuration] ;</li>
<li>la ligne 12 active la gestion d&#x27;un cache. Le principe est la suivant :</li>
<li>on met l&#x27;annotation [@Cacheable(&#x27;nom_du_cache&#x27;)] à une méthode M. Le &#x27;nom_du-cache&#x27; est le nom utilisé ligne 41 ;</li>
<li>lorsque la méthode M est appelée la 1ère fois, ses résultats sont rendus et également mis dans le cache nommé par l&#x27;annotation ;</li>
<li>lorsque la méthode M est appelée les fois suivantes avec les mêmes paramètres que la 1ère fois, elle n&#x27;est pas exécutée et Spring se contente de rendre les valeurs mises en cache ;</li>
</ul>
<h2 id="77-configuration-des-logs">7.7. Configuration des logs</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000001AD000001B9F417F917.png" style="display:inline-block; margin:4px;width:5.676cm;height:5.835cm;" /></td></tr></table>

<p>Les bibliothèques de logs sont définies par la dépendance suivante dans [pom.xml] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Logging</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">logging</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Cette dépendance amène les bibliothèques suivantes :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000123000000819DA6E3AA.png" style="display:inline-block; margin:4px;width:5.611cm;height:2.487cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>C&#x27;est la bibliothèque [logback] qui va assurer les logs. Elle est configurée par deux fichiers :</p>
<ul>
<li>[logback.xml] pour la branche principale du code ;</li>
<li>
<p>[logback-test.xml] pour la branche de test du code. En l&#x27;absence de ce fichier, le fichier précédent est alors utilisé ;
Ces deux fichiers doivent se trouver dans le [Classpath] du projet. Pour cette raison, ils sont placés dans le dossier :</p>
</li>
<li>
<p>[src / main / ressources] pour la branche principale du code ;</p>
</li>
<li>[src / test / ressources] pour la branche de test du code ;
Le contenu des fichiers est ici le même :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span><span class="w"> </span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="o">&lt;</span><span class="n">appender</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;STDOUT&quot;</span><span class="w"> </span><span class="kd">class</span><span class="err">=&quot;</span><span class="nc">ch</span><span class="p">.</span><span class="na">qos</span><span class="p">.</span><span class="na">logback</span><span class="p">.</span><span class="na">core</span><span class="p">.</span><span class="na">ConsoleAppender</span><span class="s">&quot;&gt; </span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="s">    &lt;!-- encoders are  by default assigned the type</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="s">         ch.qos.logback.classic.encoder.PatternLayoutEncoder --&gt;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="s">    &lt;encoder&gt;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="s">      &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="s">    &lt;/encoder&gt;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="s">  &lt;/appender&gt;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="s">  &lt;!-- contrôle niveau des logs --&gt;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="s">  &lt;root level=&quot;</span><span class="n">info</span><span class="s">&quot;&gt; &lt;!-- info, debug, warn --&gt;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="s">    &lt;appender-ref ref=&quot;</span><span class="n">STDOUT</span><span class="s">&quot; /&gt;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="s">  &lt;/root&gt;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="s">&lt;/configuration&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Tout se passe ligne 12 où on fixe le niveau d&#x27;information désiré :</p>
<ul>
<li>[debug] : le niveau le plus détaillé ;</li>
<li>[off] : pas de logs ;</li>
<li>[info] : le niveau normal des logs ;</li>
<li>[warn] : idem niveau [info] plus les messages d&#x27;avertissement (warning). Ces messages indiquent une possibilité d&#x27;erreur ;
Passez en mode [debug] dès que des erreurs apparaissent à l&#x27;exécution.</li>
</ul>
<h2 id="78-implementation-de-la-couche-dao">7.8. Implémentation de la couche [DAO]</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000052300000111576A9DF3.png" style="display:inline-block; margin:4px;width:17.397cm;height:3.612cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000FD000000B8EDB337F3.png" style="display:inline-block; margin:4px;width:4.68cm;height:3.41cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>L&#x27;interface [IDao] de la couche [DAO] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">istia.st.elections.webapi.client.dao</span><span class="p">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">istia.st.elections.webapi.client.entities.ElectionsConfig</span><span class="p">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">istia.st.elections.webapi.client.entities.ListeElectorale</span><span class="p">;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IDao</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="c1">// configuration des élections</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ElectionsConfig</span><span class="w"> </span><span class="nf">getElectionsConfig</span><span class="p">();</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="c1">// les listes en compétition</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="nf">getListesElectorales</span><span class="p">();</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="c1">// sauvegarde des résultats de l&#39;élection</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setListesElectorales</span><span class="p">(</span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listesElectorales</span><span class="p">);</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Le squelette de la classe [ElectionsDaoJdbc] implémentant la couche [dao] avec une base de données sera le suivant :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span>
<span class="normal"><a href="#__codelineno-10-29">29</a></span>
<span class="normal"><a href="#__codelineno-10-30">30</a></span>
<span class="normal"><a href="#__codelineno-10-31">31</a></span>
<span class="normal"><a href="#__codelineno-10-32">32</a></span>
<span class="normal"><a href="#__codelineno-10-33">33</a></span>
<span class="normal"><a href="#__codelineno-10-34">34</a></span>
<span class="normal"><a href="#__codelineno-10-35">35</a></span>
<span class="normal"><a href="#__codelineno-10-36">36</a></span>
<span class="normal"><a href="#__codelineno-10-37">37</a></span>
<span class="normal"><a href="#__codelineno-10-38">38</a></span>
<span class="normal"><a href="#__codelineno-10-39">39</a></span>
<span class="normal"><a href="#__codelineno-10-40">40</a></span>
<span class="normal"><a href="#__codelineno-10-41">41</a></span>
<span class="normal"><a href="#__codelineno-10-42">42</a></span>
<span class="normal"><a href="#__codelineno-10-43">43</a></span>
<span class="normal"><a href="#__codelineno-10-44">44</a></span>
<span class="normal"><a href="#__codelineno-10-45">45</a></span>
<span class="normal"><a href="#__codelineno-10-46">46</a></span>
<span class="normal"><a href="#__codelineno-10-47">47</a></span>
<span class="normal"><a href="#__codelineno-10-48">48</a></span>
<span class="normal"><a href="#__codelineno-10-49">49</a></span>
<span class="normal"><a href="#__codelineno-10-50">50</a></span>
<span class="normal"><a href="#__codelineno-10-51">51</a></span>
<span class="normal"><a href="#__codelineno-10-52">52</a></span>
<span class="normal"><a href="#__codelineno-10-53">53</a></span>
<span class="normal"><a href="#__codelineno-10-54">54</a></span>
<span class="normal"><a href="#__codelineno-10-55">55</a></span>
<span class="normal"><a href="#__codelineno-10-56">56</a></span>
<span class="normal"><a href="#__codelineno-10-57">57</a></span>
<span class="normal"><a href="#__codelineno-10-58">58</a></span>
<span class="normal"><a href="#__codelineno-10-59">59</a></span>
<span class="normal"><a href="#__codelineno-10-60">60</a></span>
<span class="normal"><a href="#__codelineno-10-61">61</a></span>
<span class="normal"><a href="#__codelineno-10-62">62</a></span>
<span class="normal"><a href="#__codelineno-10-63">63</a></span>
<span class="normal"><a href="#__codelineno-10-64">64</a></span>
<span class="normal"><a href="#__codelineno-10-65">65</a></span>
<span class="normal"><a href="#__codelineno-10-66">66</a></span>
<span class="normal"><a href="#__codelineno-10-67">67</a></span>
<span class="normal"><a href="#__codelineno-10-68">68</a></span>
<span class="normal"><a href="#__codelineno-10-69">69</a></span>
<span class="normal"><a href="#__codelineno-10-70">70</a></span>
<span class="normal"><a href="#__codelineno-10-71">71</a></span>
<span class="normal"><a href="#__codelineno-10-72">72</a></span>
<span class="normal"><a href="#__codelineno-10-73">73</a></span>
<span class="normal"><a href="#__codelineno-10-74">74</a></span>
<span class="normal"><a href="#__codelineno-10-75">75</a></span>
<span class="normal"><a href="#__codelineno-10-76">76</a></span>
<span class="normal"><a href="#__codelineno-10-77">77</a></span>
<span class="normal"><a href="#__codelineno-10-78">78</a></span>
<span class="normal"><a href="#__codelineno-10-79">79</a></span>
<span class="normal"><a href="#__codelineno-10-80">80</a></span>
<span class="normal"><a href="#__codelineno-10-81">81</a></span>
<span class="normal"><a href="#__codelineno-10-82">82</a></span>
<span class="normal"><a href="#__codelineno-10-83">83</a></span>
<span class="normal"><a href="#__codelineno-10-84">84</a></span>
<span class="normal"><a href="#__codelineno-10-85">85</a></span>
<span class="normal"><a href="#__codelineno-10-86">86</a></span>
<span class="normal"><a href="#__codelineno-10-87">87</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.service</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.Connection</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.PreparedStatement</span><span class="p">;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSet</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.SQLException</span><span class="p">;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.tomcat.jdbc.pool.DataSource</span><span class="p">;</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.cache.annotation.Cacheable</span><span class="p">;</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ElectionsConfig</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ElectionsException</span><span class="p">;</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ListeElectorale</span><span class="p">;</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="nd">@Component</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unused&quot;</span><span class="p">)</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ElectionDaoJdbc</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IElectionsDao</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">    </span><span class="nd">@Autowired</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">DataSource</span><span class="w"> </span><span class="n">dataSource</span><span class="p">;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="w">    </span><span class="nd">@Cacheable</span><span class="p">(</span><span class="s">&quot;electionsConfig&quot;</span><span class="p">)</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="w">    </span><span class="c1">// obtention conf de l&#39;élection</span>
<a id="__codelineno-10-26" name="__codelineno-10-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ElectionsConfig</span><span class="w"> </span><span class="nf">getElectionsConfig</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-27" name="__codelineno-10-27"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;[getElectionsConfig] not yet implemented&quot;</span><span class="p">);</span>
<a id="__codelineno-10-28" name="__codelineno-10-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-29" name="__codelineno-10-29"></a>
<a id="__codelineno-10-30" name="__codelineno-10-30"></a><span class="w">    </span><span class="c1">// obtention des listes</span>
<a id="__codelineno-10-31" name="__codelineno-10-31"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="nf">getListesElectorales</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-32" name="__codelineno-10-32"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;[getListesElectorales] not yet implemented&quot;</span><span class="p">);</span>
<a id="__codelineno-10-33" name="__codelineno-10-33"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-34" name="__codelineno-10-34"></a>
<a id="__codelineno-10-35" name="__codelineno-10-35"></a><span class="w">    </span><span class="c1">// modification des listes [voix, sieges, elimine]</span>
<a id="__codelineno-10-36" name="__codelineno-10-36"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setListesElectorales</span><span class="p">(</span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listesElectorales</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-37" name="__codelineno-10-37"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;[setListesElectorales] not yet implemented&quot;</span><span class="p">);</span>
<a id="__codelineno-10-38" name="__codelineno-10-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-39" name="__codelineno-10-39"></a>
<a id="__codelineno-10-40" name="__codelineno-10-40"></a><span class="w">    </span><span class="c1">// -------------------- méthodes privées</span>
<a id="__codelineno-10-41" name="__codelineno-10-41"></a>
<a id="__codelineno-10-42" name="__codelineno-10-42"></a><span class="w">    </span><span class="c1">// gestion du finally</span>
<a id="__codelineno-10-43" name="__codelineno-10-43"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ElectionsException</span><span class="w"> </span><span class="nf">doFinally</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="p">,</span><span class="w"> </span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">ps</span><span class="p">,</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">connexion</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-44" name="__codelineno-10-44"></a><span class="w">        </span><span class="c1">// fermeture ResultSet</span>
<a id="__codelineno-10-45" name="__codelineno-10-45"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rs</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-46" name="__codelineno-10-46"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-47" name="__codelineno-10-47"></a><span class="w">                </span><span class="n">rs</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-10-48" name="__codelineno-10-48"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-49" name="__codelineno-10-49"></a>
<a id="__codelineno-10-50" name="__codelineno-10-50"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-10-51" name="__codelineno-10-51"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-52" name="__codelineno-10-52"></a><span class="w">        </span><span class="c1">// fermeture [PreparedStatement]</span>
<a id="__codelineno-10-53" name="__codelineno-10-53"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ps</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-54" name="__codelineno-10-54"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-55" name="__codelineno-10-55"></a><span class="w">                </span><span class="n">ps</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-10-56" name="__codelineno-10-56"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-57" name="__codelineno-10-57"></a>
<a id="__codelineno-10-58" name="__codelineno-10-58"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-10-59" name="__codelineno-10-59"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-60" name="__codelineno-10-60"></a><span class="w">        </span><span class="c1">// fermer la connexion</span>
<a id="__codelineno-10-61" name="__codelineno-10-61"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">connexion</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-62" name="__codelineno-10-62"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-63" name="__codelineno-10-63"></a><span class="w">                </span><span class="n">connexion</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-10-64" name="__codelineno-10-64"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-65" name="__codelineno-10-65"></a><span class="w">                </span><span class="c1">// on retourne une [ElectionsException]</span>
<a id="__codelineno-10-66" name="__codelineno-10-66"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ElectionsException</span><span class="p">(</span><span class="n">code</span><span class="p">,</span><span class="w"> </span><span class="n">e3</span><span class="p">);</span>
<a id="__codelineno-10-67" name="__codelineno-10-67"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-10-68" name="__codelineno-10-68"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-69" name="__codelineno-10-69"></a><span class="w">        </span><span class="c1">// pas d&#39;exception</span>
<a id="__codelineno-10-70" name="__codelineno-10-70"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-10-71" name="__codelineno-10-71"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-72" name="__codelineno-10-72"></a>
<a id="__codelineno-10-73" name="__codelineno-10-73"></a><span class="w">    </span><span class="c1">// gestion du catch</span>
<a id="__codelineno-10-74" name="__codelineno-10-74"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ElectionsException</span><span class="w"> </span><span class="nf">doCatchException</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">code1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">code2</span><span class="p">,</span><span class="w"> </span><span class="n">Connection</span><span class="w"> </span><span class="n">connexion</span><span class="p">,</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="n">th</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-75" name="__codelineno-10-75"></a><span class="w">        </span><span class="c1">// on génère une [ElectionsException]</span>
<a id="__codelineno-10-76" name="__codelineno-10-76"></a><span class="w">        </span><span class="n">ElectionsException</span><span class="w"> </span><span class="n">ex1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ElectionsException</span><span class="p">(</span><span class="n">code1</span><span class="p">,</span><span class="w"> </span><span class="n">th</span><span class="p">);</span>
<a id="__codelineno-10-77" name="__codelineno-10-77"></a><span class="w">        </span><span class="c1">// annulation transaction</span>
<a id="__codelineno-10-78" name="__codelineno-10-78"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-79" name="__codelineno-10-79"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">connexion</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-80" name="__codelineno-10-80"></a><span class="w">                </span><span class="n">connexion</span><span class="p">.</span><span class="na">rollback</span><span class="p">();</span>
<a id="__codelineno-10-81" name="__codelineno-10-81"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-10-82" name="__codelineno-10-82"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-83" name="__codelineno-10-83"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-84" name="__codelineno-10-84"></a><span class="w">        </span><span class="c1">// on retourne l&#39;exception</span>
<a id="__codelineno-10-85" name="__codelineno-10-85"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ex1</span><span class="p">;</span>
<a id="__codelineno-10-86" name="__codelineno-10-86"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-87" name="__codelineno-10-87"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 24 : l&#x27;annotation [@Cacheable] est une annotation Spring qui demande de mettre en mémoire (&#x27;cacher&#x27;) les résultats de la méthode [getElectionsConfig]. Il est possible de faire cela ici parce que le contenu de la table [CONF] ne change jamais. Il ne serait pas possible de mettre cette annotation sur la méthode [getListesElectorales] car le contenu de la table [LISTES] change au cours du temps ;</li>
<li>les méthodes [doCatchException] et [doFinally] retournent un type [ElectionsException]. La méthode [doFinally] rend un pointeur null si la libération des ressources s&#x27;est faite sans erreurs ;
<strong>Travail à faire </strong>: écrivez la classe [ElectionDaoJdbc] en vous inspirant de la classe [IntroJdbc02] étudiée au paragraphe 6.5.2, page 96.</li>
</ul>
<h2 id="79-la-classe-de-test-main">7.9. La classe de test [Main]</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005120000010C2BC21605.png" style="display:inline-block; margin:4px;width:17.171cm;height:3.545cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000E9000000DC13348C3A.png" style="display:inline-block; margin:4px;width:4.309cm;height:4.069cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [Main] est la suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span>
<span class="normal"><a href="#__codelineno-11-19">19</a></span>
<span class="normal"><a href="#__codelineno-11-20">20</a></span>
<span class="normal"><a href="#__codelineno-11-21">21</a></span>
<span class="normal"><a href="#__codelineno-11-22">22</a></span>
<span class="normal"><a href="#__codelineno-11-23">23</a></span>
<span class="normal"><a href="#__codelineno-11-24">24</a></span>
<span class="normal"><a href="#__codelineno-11-25">25</a></span>
<span class="normal"><a href="#__codelineno-11-26">26</a></span>
<span class="normal"><a href="#__codelineno-11-27">27</a></span>
<span class="normal"><a href="#__codelineno-11-28">28</a></span>
<span class="normal"><a href="#__codelineno-11-29">29</a></span>
<span class="normal"><a href="#__codelineno-11-30">30</a></span>
<span class="normal"><a href="#__codelineno-11-31">31</a></span>
<span class="normal"><a href="#__codelineno-11-32">32</a></span>
<span class="normal"><a href="#__codelineno-11-33">33</a></span>
<span class="normal"><a href="#__codelineno-11-34">34</a></span>
<span class="normal"><a href="#__codelineno-11-35">35</a></span>
<span class="normal"><a href="#__codelineno-11-36">36</a></span>
<span class="normal"><a href="#__codelineno-11-37">37</a></span>
<span class="normal"><a href="#__codelineno-11-38">38</a></span>
<span class="normal"><a href="#__codelineno-11-39">39</a></span>
<span class="normal"><a href="#__codelineno-11-40">40</a></span>
<span class="normal"><a href="#__codelineno-11-41">41</a></span>
<span class="normal"><a href="#__codelineno-11-42">42</a></span>
<span class="normal"><a href="#__codelineno-11-43">43</a></span>
<span class="normal"><a href="#__codelineno-11-44">44</a></span>
<span class="normal"><a href="#__codelineno-11-45">45</a></span>
<span class="normal"><a href="#__codelineno-11-46">46</a></span>
<span class="normal"><a href="#__codelineno-11-47">47</a></span>
<span class="normal"><a href="#__codelineno-11-48">48</a></span>
<span class="normal"><a href="#__codelineno-11-49">49</a></span>
<span class="normal"><a href="#__codelineno-11-50">50</a></span>
<span class="normal"><a href="#__codelineno-11-51">51</a></span>
<span class="normal"><a href="#__codelineno-11-52">52</a></span>
<span class="normal"><a href="#__codelineno-11-53">53</a></span>
<span class="normal"><a href="#__codelineno-11-54">54</a></span>
<span class="normal"><a href="#__codelineno-11-55">55</a></span>
<span class="normal"><a href="#__codelineno-11-56">56</a></span>
<span class="normal"><a href="#__codelineno-11-57">57</a></span>
<span class="normal"><a href="#__codelineno-11-58">58</a></span>
<span class="normal"><a href="#__codelineno-11-59">59</a></span>
<span class="normal"><a href="#__codelineno-11-60">60</a></span>
<span class="normal"><a href="#__codelineno-11-61">61</a></span>
<span class="normal"><a href="#__codelineno-11-62">62</a></span>
<span class="normal"><a href="#__codelineno-11-63">63</a></span>
<span class="normal"><a href="#__codelineno-11-64">64</a></span>
<span class="normal"><a href="#__codelineno-11-65">65</a></span>
<span class="normal"><a href="#__codelineno-11-66">66</a></span>
<span class="normal"><a href="#__codelineno-11-67">67</a></span>
<span class="normal"><a href="#__codelineno-11-68">68</a></span>
<span class="normal"><a href="#__codelineno-11-69">69</a></span>
<span class="normal"><a href="#__codelineno-11-70">70</a></span>
<span class="normal"><a href="#__codelineno-11-71">71</a></span>
<span class="normal"><a href="#__codelineno-11-72">72</a></span>
<span class="normal"><a href="#__codelineno-11-73">73</a></span>
<span class="normal"><a href="#__codelineno-11-74">74</a></span>
<span class="normal"><a href="#__codelineno-11-75">75</a></span>
<span class="normal"><a href="#__codelineno-11-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.console</span><span class="p">;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.context.annotation.AnnotationConfigApplicationContext</span><span class="p">;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.config.AppConfig</span><span class="p">;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ElectionsConfig</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ElectionsException</span><span class="p">;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ListeElectorale</span><span class="p">;</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.service.IElectionsDao</span><span class="p">;</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">    </span><span class="c1">// source de données</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">IElectionsDao</span><span class="w"> </span><span class="n">dao</span><span class="p">;</span>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-20" name="__codelineno-11-20"></a><span class="w">        </span><span class="c1">// on récupère la référence de la couche [DAO] après avoir instancié le contexte Spring</span>
<a id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">AnnotationConfigApplicationContext</span><span class="w"> </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AnnotationConfigApplicationContext</span><span class="p">(</span><span class="n">AppConfig</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="w">            </span><span class="c1">// récupération de la source de données</span>
<a id="__codelineno-11-23" name="__codelineno-11-23"></a><span class="w">            </span><span class="n">dao</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="na">getBean</span><span class="p">(</span><span class="n">IElectionsDao</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-11-24" name="__codelineno-11-24"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-25" name="__codelineno-11-25"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Les erreurs suivantes se sont produites lors de l&#39;initialisation du contexte Spring -------&quot;</span><span class="p">);</span>
<a id="__codelineno-11-26" name="__codelineno-11-26"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">erreur</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">getErreursForThrowable</span><span class="p">(</span><span class="n">e</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-27" name="__codelineno-11-27"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">erreur</span><span class="p">);</span>
<a id="__codelineno-11-28" name="__codelineno-11-28"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-11-29" name="__codelineno-11-29"></a><span class="w">            </span><span class="c1">// fin</span>
<a id="__codelineno-11-30" name="__codelineno-11-30"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-11-31" name="__codelineno-11-31"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-11-32" name="__codelineno-11-32"></a><span class="w">        </span><span class="c1">// lecture de la BD</span>
<a id="__codelineno-11-33" name="__codelineno-11-33"></a><span class="w">        </span><span class="n">ElectionsConfig</span><span class="w"> </span><span class="n">electionsConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-11-34" name="__codelineno-11-34"></a><span class="w">        </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listes</span><span class="p">;</span>
<a id="__codelineno-11-35" name="__codelineno-11-35"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-36" name="__codelineno-11-36"></a><span class="w">            </span><span class="c1">// contenu des deux tables</span>
<a id="__codelineno-11-37" name="__codelineno-11-37"></a><span class="w">            </span><span class="n">electionsConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">getElectionsConfig</span><span class="p">();</span>
<a id="__codelineno-11-38" name="__codelineno-11-38"></a><span class="w">            </span><span class="n">listes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">getListesElectorales</span><span class="p">();</span>
<a id="__codelineno-11-39" name="__codelineno-11-39"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ElectionsException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-40" name="__codelineno-11-40"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Les erreurs suivantes se sont produites lors de la lecture des tables ----------&quot;</span><span class="p">);</span>
<a id="__codelineno-11-41" name="__codelineno-11-41"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">erreur</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getErreurs</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-42" name="__codelineno-11-42"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">erreur</span><span class="p">);</span>
<a id="__codelineno-11-43" name="__codelineno-11-43"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-11-44" name="__codelineno-11-44"></a><span class="w">            </span><span class="c1">// fin</span>
<a id="__codelineno-11-45" name="__codelineno-11-45"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-11-46" name="__codelineno-11-46"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-11-47" name="__codelineno-11-47"></a><span class="w">        </span><span class="c1">// tout s&#39;est bien passé - affichage</span>
<a id="__codelineno-11-48" name="__codelineno-11-48"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;Nombre de sièges à pourvoir : %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">electionsConfig</span><span class="p">.</span><span class="na">getNbSiegesAPourvoir</span><span class="p">()));</span>
<a id="__codelineno-11-49" name="__codelineno-11-49"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;Seuil électoral : %5.2f&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">electionsConfig</span><span class="p">.</span><span class="na">getSeuilElectoral</span><span class="p">()));</span>
<a id="__codelineno-11-50" name="__codelineno-11-50"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Listes candidates----------------&quot;</span><span class="p">);</span>
<a id="__codelineno-11-51" name="__codelineno-11-51"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ListeElectorale</span><span class="w"> </span><span class="n">liste</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">listes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-52" name="__codelineno-11-52"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">liste</span><span class="p">);</span>
<a id="__codelineno-11-53" name="__codelineno-11-53"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-11-54" name="__codelineno-11-54"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-55" name="__codelineno-11-55"></a>
<a id="__codelineno-11-56" name="__codelineno-11-56"></a><span class="w">    </span><span class="c1">// méthodes privées ------------------</span>
<a id="__codelineno-11-57" name="__codelineno-11-57"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getErreursForThrowable</span><span class="p">(</span><span class="n">Throwable</span><span class="w"> </span><span class="n">th</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-58" name="__codelineno-11-58"></a><span class="w">        </span><span class="c1">// on récupère la liste des messages d&#39;erreur de l&#39;exception</span>
<a id="__codelineno-11-59" name="__codelineno-11-59"></a><span class="w">        </span><span class="n">Throwable</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">th</span><span class="p">;</span>
<a id="__codelineno-11-60" name="__codelineno-11-60"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">erreurs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-11-61" name="__codelineno-11-61"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cause</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-62" name="__codelineno-11-62"></a><span class="w">            </span><span class="c1">// on récupère le message seulement s&#39;il est !=null et non blanc</span>
<a id="__codelineno-11-63" name="__codelineno-11-63"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cause</span><span class="p">.</span><span class="na">getMessage</span><span class="p">();</span>
<a id="__codelineno-11-64" name="__codelineno-11-64"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-65" name="__codelineno-11-65"></a><span class="w">                </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">message</span><span class="p">.</span><span class="na">trim</span><span class="p">();</span>
<a id="__codelineno-11-66" name="__codelineno-11-66"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-67" name="__codelineno-11-67"></a><span class="w">                    </span><span class="n">erreurs</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-11-68" name="__codelineno-11-68"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-11-69" name="__codelineno-11-69"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-11-70" name="__codelineno-11-70"></a><span class="w">            </span><span class="c1">// cause suivante</span>
<a id="__codelineno-11-71" name="__codelineno-11-71"></a><span class="w">            </span><span class="n">cause</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cause</span><span class="p">.</span><span class="na">getCause</span><span class="p">();</span>
<a id="__codelineno-11-72" name="__codelineno-11-72"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-11-73" name="__codelineno-11-73"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">erreurs</span><span class="p">;</span>
<a id="__codelineno-11-74" name="__codelineno-11-74"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-75" name="__codelineno-11-75"></a>
<a id="__codelineno-11-76" name="__codelineno-11-76"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 21-31 : récupération d&#x27;une référence sur la couche [DAO] ;</li>
<li>
<p>ligne 21 : on utilise une syntaxe appelée try_with_resources. Sa syntaxe est la suivante :
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">ressource</span><span class="o">=</span><span class="n">expression</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">            </span><span class="c1">// exploitation de ressource</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="p">...</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>le type T de la ligne 1 doit implémenter l&#x27;interface [java.lang.AutoCloseable] ;</p>
</li>
<li>à la sortie du bloc des lignes 1-4, la ressource de type [java.lang.AutoCloseable] est automatiquement libérée qu&#x27;il y ait eu exception ou pas. Ceux qui connaissent le langage C# reconnaîtront là un frère syntaxique et fonctionnel de la clause <strong>using</strong> (T ressource=expression) ;</li>
<li>lignes 40-49 : utilisation de la couche [DAO] pour obtenir le contenu des tables [CONF] et [LISTES] ;</li>
<li>lignes 41-47 : on teste le cache [electionsconfig]. Celui-ci a été défini à deux endroits :</li>
<li>
<p>dans la classe [ElectionsDaoJdbc] :
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="w">  </span><span class="nd">@Cacheable</span><span class="p">(</span><span class="s">&quot;electionsConfig&quot;</span><span class="p">)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">ElectionsConfig</span><span class="w"> </span><span class="nf">getElectionsConfig</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>dans la classe de configuration [AppConfig] :
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span>
<span class="normal"><a href="#__codelineno-14-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nd">@EnableCaching</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="p">...</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="nd">@Bean</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">CacheManager</span><span class="w"> </span><span class="nf">cacheManager</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ConcurrentMapCacheManager</span><span class="p">(</span><span class="s">&quot;electionsConfig&quot;</span><span class="p">);</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>ligne 59 : fermeture du contexte Spring ;</p>
</li>
<li>lignes 62-67 : affichage des informations obtenues ;
Les résultats obtenus avec une couche [DAO] implémentée sont les suivants :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="p">...</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="n">début</span><span class="w"> </span><span class="n">requête</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">752</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">fin</span><span class="w"> </span><span class="n">requête</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">et</span><span class="w"> </span><span class="n">début</span><span class="w"> </span><span class="n">requête</span><span class="w"> </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">132</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="n">fin</span><span class="w"> </span><span class="n">requête</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">133</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="p">...</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="n">Nombre</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">sièges</span><span class="w"> </span><span class="n">à</span><span class="w"> </span><span class="n">pourvoir</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="n">Seuil</span><span class="w"> </span><span class="n">électoral</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="mo">05</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="n">Listes</span><span class="w"> </span><span class="n">candidates</span><span class="o">----------------</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;A&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">32000</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;B&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">25000</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">16000</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;D&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">12000</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;E&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">8000</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;F&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">4500</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;G&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">2500</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 2-4 : montrent l&#x27;influence du cache :</li>
<li>la requête 1 dure 80 millisecondes ;</li>
<li>la requête 2 dure 1 milliseconde ;
Lorsque la base de données est coupée on obtient les résultats suivants :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">Les</span><span class="w"> </span><span class="n">erreurs</span><span class="w"> </span><span class="n">suivantes</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="n">sont</span><span class="w"> </span><span class="n">produites</span><span class="w"> </span><span class="n">lors</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">la</span><span class="w"> </span><span class="n">lecture</span><span class="w"> </span><span class="n">des</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="o">----------</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="n">Communications</span><span class="w"> </span><span class="n">link</span><span class="w"> </span><span class="n">failure</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="n">The</span><span class="w"> </span><span class="n">last</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="n">sent</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">was</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">milliseconds</span><span class="w"> </span><span class="n">ago</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">driver</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">received</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">packets</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">server</span><span class="p">.</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="n">Connection</span><span class="w"> </span><span class="n">refused</span><span class="p">:</span><span class="w"> </span><span class="n">connect</span>
</code></pre></div></td></tr></table></div>
<h2 id="710-tests-junit-de-la-classe-electionsdaojdbc">7.10. Tests JUnit de la classe [ElectionsDaoJdbc]</h2>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000504000001051711870E.png" style="display:inline-block; margin:4px;width:16.986cm;height:3.454cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000000F6000000DD8B3B1641.png" style="display:inline-block; margin:4px;width:4.56cm;height:4.09cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>La classe [Test01] est la classe de test [JUnit] suivante :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span>
<span class="normal"><a href="#__codelineno-17-36">36</a></span>
<span class="normal"><a href="#__codelineno-17-37">37</a></span>
<span class="normal"><a href="#__codelineno-17-38">38</a></span>
<span class="normal"><a href="#__codelineno-17-39">39</a></span>
<span class="normal"><a href="#__codelineno-17-40">40</a></span>
<span class="normal"><a href="#__codelineno-17-41">41</a></span>
<span class="normal"><a href="#__codelineno-17-42">42</a></span>
<span class="normal"><a href="#__codelineno-17-43">43</a></span>
<span class="normal"><a href="#__codelineno-17-44">44</a></span>
<span class="normal"><a href="#__codelineno-17-45">45</a></span>
<span class="normal"><a href="#__codelineno-17-46">46</a></span>
<span class="normal"><a href="#__codelineno-17-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">elections.dao.junit</span><span class="p">;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Assert</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Before</span><span class="p">;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Test</span><span class="p">;</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.runner.RunWith</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.test.SpringApplicationConfiguration</span><span class="p">;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span><span class="p">;</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.config.AppConfig</span><span class="p">;</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ElectionsConfig</span><span class="p">;</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.entities.ListeElectorale</span><span class="p">;</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="kn">import</span><span class="w"> </span><span class="nn">elections.dao.service.IElectionsDao</span><span class="p">;</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="nd">@SpringApplicationConfiguration</span><span class="p">(</span><span class="n">classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AppConfig</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="nd">@RunWith</span><span class="p">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test01</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">    </span><span class="c1">// couche [DAO]</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">    </span><span class="nd">@Autowired</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">IElectionsDao</span><span class="w"> </span><span class="n">electionsDao</span><span class="p">;</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a>
<a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">    </span><span class="nd">@Before</span>
<a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-27" name="__codelineno-17-27"></a><span class="w">        </span><span class="c1">// on nettoie la table [LISTES]</span>
<a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">        </span><span class="c1">// listes en compétition</span>
<a id="__codelineno-17-29" name="__codelineno-17-29"></a><span class="w">        </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">getListesElectorales</span><span class="p">();</span>
<a id="__codelineno-17-30" name="__codelineno-17-30"></a><span class="w">        </span><span class="c1">// on met à 0 les voix et sièges et elimine à false</span>
<a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sièges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-17-33" name="__codelineno-17-33"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ListeElectorale</span><span class="w"> </span><span class="n">liste</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">listes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-35" name="__codelineno-17-35"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setVoix</span><span class="p">(</span><span class="n">voix</span><span class="p">);</span>
<a id="__codelineno-17-36" name="__codelineno-17-36"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setSieges</span><span class="p">(</span><span class="n">sièges</span><span class="p">);</span>
<a id="__codelineno-17-37" name="__codelineno-17-37"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setElimine</span><span class="p">(</span><span class="n">elimine</span><span class="p">);</span>
<a id="__codelineno-17-38" name="__codelineno-17-38"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-39" name="__codelineno-17-39"></a><span class="w">        </span><span class="c1">// on rend ces données persistantes grâce à la couche [dao]</span>
<a id="__codelineno-17-40" name="__codelineno-17-40"></a><span class="w">        </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">setListesElectorales</span><span class="p">(</span><span class="n">listes</span><span class="p">);</span>
<a id="__codelineno-17-41" name="__codelineno-17-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-42" name="__codelineno-17-42"></a>
<a id="__codelineno-17-43" name="__codelineno-17-43"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-17-44" name="__codelineno-17-44"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testElections01</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-45" name="__codelineno-17-45"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-17-46" name="__codelineno-17-46"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-47" name="__codelineno-17-47"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>ligne 17 : l&#x27;annotation [RunWith] qui est une annotation [JUnit] (ligne 6) assure l&#x27;intégration avec Spring via la classe [SpringJUnit4ClassRunner] ;</li>
<li>ligne 16 : l&#x27;annotation [SpringApplicationConfiguration] est une annotation [Spring] (ligne 8) qui permet de désigner les classes de configuration du test JUnit. Ici on désigne la classe [AppConfig] utilisée pour configurer le projet. On dispose alors de tous les objets Spring définis par cette classe de configuration. C&#x27;est ainsi qu&#x27;on peut injecter lignes 21-22 une référence sur la couche [DAO] qui va être testée ;</li>
<li>ligne 25 : l&#x27;annotation [Before] désigne une méthode qui doit être exécutée avant chaque test ;</li>
<li>lignes 26-41 : la méthode [init] met les voix et sièges des listes de la table [LISTES] à zéro et le booléen [elimine] à [false] ;
L&#x27;unique méthode de test est la suivante :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span>
<span class="normal"><a href="#__codelineno-18-23">23</a></span>
<span class="normal"><a href="#__codelineno-18-24">24</a></span>
<span class="normal"><a href="#__codelineno-18-25">25</a></span>
<span class="normal"><a href="#__codelineno-18-26">26</a></span>
<span class="normal"><a href="#__codelineno-18-27">27</a></span>
<span class="normal"><a href="#__codelineno-18-28">28</a></span>
<span class="normal"><a href="#__codelineno-18-29">29</a></span>
<span class="normal"><a href="#__codelineno-18-30">30</a></span>
<span class="normal"><a href="#__codelineno-18-31">31</a></span>
<span class="normal"><a href="#__codelineno-18-32">32</a></span>
<span class="normal"><a href="#__codelineno-18-33">33</a></span>
<span class="normal"><a href="#__codelineno-18-34">34</a></span>
<span class="normal"><a href="#__codelineno-18-35">35</a></span>
<span class="normal"><a href="#__codelineno-18-36">36</a></span>
<span class="normal"><a href="#__codelineno-18-37">37</a></span>
<span class="normal"><a href="#__codelineno-18-38">38</a></span>
<span class="normal"><a href="#__codelineno-18-39">39</a></span>
<span class="normal"><a href="#__codelineno-18-40">40</a></span>
<span class="normal"><a href="#__codelineno-18-41">41</a></span>
<span class="normal"><a href="#__codelineno-18-42">42</a></span>
<span class="normal"><a href="#__codelineno-18-43">43</a></span>
<span class="normal"><a href="#__codelineno-18-44">44</a></span>
<span class="normal"><a href="#__codelineno-18-45">45</a></span>
<span class="normal"><a href="#__codelineno-18-46">46</a></span>
<span class="normal"><a href="#__codelineno-18-47">47</a></span>
<span class="normal"><a href="#__codelineno-18-48">48</a></span>
<span class="normal"><a href="#__codelineno-18-49">49</a></span>
<span class="normal"><a href="#__codelineno-18-50">50</a></span>
<span class="normal"><a href="#__codelineno-18-51">51</a></span>
<span class="normal"><a href="#__codelineno-18-52">52</a></span>
<span class="normal"><a href="#__codelineno-18-53">53</a></span>
<span class="normal"><a href="#__codelineno-18-54">54</a></span>
<span class="normal"><a href="#__codelineno-18-55">55</a></span>
<span class="normal"><a href="#__codelineno-18-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="nd">@Test</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testElections01</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;testElections01-------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">        </span><span class="c1">// récupération de la configuration des élections</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">        </span><span class="n">ElectionsConfig</span><span class="w"> </span><span class="n">electionsConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">getElectionsConfig</span><span class="p">();</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsConfig</span><span class="p">.</span><span class="na">getNbSiegesAPourvoir</span><span class="p">();</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsConfig</span><span class="p">.</span><span class="na">getSeuilElectoral</span><span class="p">();</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="p">);</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="p">,</span><span class="w"> </span><span class="mf">1E-6</span><span class="p">);</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">        </span><span class="c1">// listes en compétition</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">        </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">getListesElectorales</span><span class="p">();</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">        </span><span class="c1">// affichage valeurs lues</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Nombre de sièges à pourvoir : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">nbSiegesAPourvoir</span><span class="p">);</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Seuil électoral : &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">seuilElectoral</span><span class="p">);</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Listes en compétition ---------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">listes</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">listes</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="w">        </span><span class="c1">// on affecte des voix et des sièges aux listes</span>
<a id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">voix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-23" name="__codelineno-18-23"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sièges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-24" name="__codelineno-18-24"></a><span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-18-25" name="__codelineno-18-25"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ListeElectorale</span><span class="w"> </span><span class="n">liste</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">listes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-26" name="__codelineno-18-26"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setVoix</span><span class="p">(</span><span class="n">voix</span><span class="p">);</span>
<a id="__codelineno-18-27" name="__codelineno-18-27"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setSieges</span><span class="p">(</span><span class="n">sièges</span><span class="p">);</span>
<a id="__codelineno-18-28" name="__codelineno-18-28"></a><span class="w">            </span><span class="n">liste</span><span class="p">.</span><span class="na">setElimine</span><span class="p">(</span><span class="n">elimine</span><span class="p">);</span>
<a id="__codelineno-18-29" name="__codelineno-18-29"></a><span class="w">            </span><span class="n">voix</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-18-30" name="__codelineno-18-30"></a><span class="w">            </span><span class="n">sièges</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-18-31" name="__codelineno-18-31"></a><span class="w">            </span><span class="n">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-18-32" name="__codelineno-18-32"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-33" name="__codelineno-18-33"></a>
<a id="__codelineno-18-34" name="__codelineno-18-34"></a><span class="w">        </span><span class="c1">// on rend ces données persistantes grâce à la couche [dao]</span>
<a id="__codelineno-18-35" name="__codelineno-18-35"></a><span class="w">        </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">setListesElectorales</span><span class="p">(</span><span class="n">listes</span><span class="p">);</span>
<a id="__codelineno-18-36" name="__codelineno-18-36"></a>
<a id="__codelineno-18-37" name="__codelineno-18-37"></a><span class="w">        </span><span class="c1">// on relit les données</span>
<a id="__codelineno-18-38" name="__codelineno-18-38"></a><span class="w">        </span><span class="n">ListeElectorale</span><span class="o">[]</span><span class="w"> </span><span class="n">listesElectorales2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electionsDao</span><span class="p">.</span><span class="na">getListesElectorales</span><span class="p">();</span>
<a id="__codelineno-18-39" name="__codelineno-18-39"></a><span class="w">        </span><span class="c1">// on vérifie les données lues</span>
<a id="__codelineno-18-40" name="__codelineno-18-40"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">listesElectorales2</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<a id="__codelineno-18-41" name="__codelineno-18-41"></a><span class="w">        </span><span class="n">voix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-42" name="__codelineno-18-42"></a><span class="w">        </span><span class="n">sièges</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-43" name="__codelineno-18-43"></a><span class="w">        </span><span class="n">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-18-44" name="__codelineno-18-44"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">ListeElectorale</span><span class="w"> </span><span class="n">liste</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">listesElectorales2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-45" name="__codelineno-18-45"></a><span class="w">            </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">voix</span><span class="p">,</span><span class="w"> </span><span class="n">liste</span><span class="p">.</span><span class="na">getVoix</span><span class="p">());</span>
<a id="__codelineno-18-46" name="__codelineno-18-46"></a><span class="w">            </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">sièges</span><span class="p">,</span><span class="w"> </span><span class="n">liste</span><span class="p">.</span><span class="na">getSieges</span><span class="p">());</span>
<a id="__codelineno-18-47" name="__codelineno-18-47"></a><span class="w">            </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">elimine</span><span class="p">,</span><span class="w"> </span><span class="n">liste</span><span class="p">.</span><span class="na">isElimine</span><span class="p">());</span>
<a id="__codelineno-18-48" name="__codelineno-18-48"></a><span class="w">            </span><span class="n">voix</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-18-49" name="__codelineno-18-49"></a><span class="w">            </span><span class="n">sièges</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-18-50" name="__codelineno-18-50"></a><span class="w">            </span><span class="n">elimine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">elimine</span><span class="p">;</span>
<a id="__codelineno-18-51" name="__codelineno-18-51"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-52" name="__codelineno-18-52"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Listes en compétition ---------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-18-53" name="__codelineno-18-53"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">listes</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-54" name="__codelineno-18-54"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">listes</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">);</span>
<a id="__codelineno-18-55" name="__codelineno-18-55"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-56" name="__codelineno-18-56"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 5-9 : on s&#x27;assure qu&#x27;on est capable de récupérer le contenu de la table [CONF] ;</li>
<li>lignes 11-19 : on affiche le contenu de la table [LISTES]. Il n&#x27;y a pas de tests ici, seulement un contrôle visuel ;</li>
<li>lignes 21-35 : on modifie en base, la table [LISTES] en donnant aux listes des valeurs pour leurs champs [voix, sieges, elimine] ;</li>
<li>lignes 37-51 : on relit la table [LISTES] et on vérifie que ce qui est obtenu est bien égal à ce qui a été mis ;</li>
<li>lignes 52-55 : vérification visuelle ;
Les résultats console obtenus avec une couche [DAO] implémentée sont les suivants :</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span>
<span class="normal"><a href="#__codelineno-19-36">36</a></span>
<span class="normal"><a href="#__codelineno-19-37">37</a></span>
<span class="normal"><a href="#__codelineno-19-38">38</a></span>
<span class="normal"><a href="#__codelineno-19-39">39</a></span>
<span class="normal"><a href="#__codelineno-19-40">40</a></span>
<span class="normal"><a href="#__codelineno-19-41">41</a></span>
<span class="normal"><a href="#__codelineno-19-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">00</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DefaultTestContextBootstrapper</span><span class="w"> </span><span class="n">getDefaultTestExecutionListenerClassNames</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Loaded</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="kd">class</span> <span class="nc">names</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="o">[</span><span class="n">META</span><span class="o">-</span><span class="n">INF</span><span class="o">/</span><span class="n">spring</span><span class="p">.</span><span class="na">factories</span><span class="o">]</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">web</span><span class="p">.</span><span class="na">ServletTestExecutionListener</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DependencyInjectionTestExecutionListener</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DirtiesContextTestExecutionListener</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">transaction</span><span class="p">.</span><span class="na">TransactionalTestExecutionListener</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">jdbc</span><span class="p">.</span><span class="na">SqlScriptsTestExecutionListener</span><span class="o">]</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">00</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DefaultTestContextBootstrapper</span><span class="w"> </span><span class="n">instantiateListeners</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="o">[</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">transaction</span><span class="p">.</span><span class="na">TransactionalTestExecutionListener</span><span class="o">]</span><span class="p">.</span><span class="w"> </span><span class="n">Specify</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="nf">classes</span><span class="w"> </span><span class="p">(</span><span class="n">and</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">dependencies</span><span class="p">)</span><span class="w"> </span><span class="n">available</span><span class="p">.</span><span class="w"> </span><span class="n">Offending</span><span class="w"> </span><span class="kd">class</span><span class="err">:</span> <span class="err">[</span><span class="nc">org</span><span class="o">/</span><span class="n">springframework</span><span class="o">/</span><span class="n">transaction</span><span class="o">/</span><span class="n">interceptor</span><span class="o">/</span><span class="n">TransactionAttributeSource</span><span class="o">]</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">00</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DefaultTestContextBootstrapper</span><span class="w"> </span><span class="n">instantiateListeners</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="o">[</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">web</span><span class="p">.</span><span class="na">ServletTestExecutionListener</span><span class="o">]</span><span class="p">.</span><span class="w"> </span><span class="n">Specify</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="nf">classes</span><span class="w"> </span><span class="p">(</span><span class="n">and</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">dependencies</span><span class="p">)</span><span class="w"> </span><span class="n">available</span><span class="p">.</span><span class="w"> </span><span class="n">Offending</span><span class="w"> </span><span class="kd">class</span><span class="err">:</span> <span class="err">[</span><span class="nc">javax</span><span class="o">/</span><span class="n">servlet</span><span class="o">/</span><span class="n">ServletContext</span><span class="o">]</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">00</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DefaultTestContextBootstrapper</span><span class="w"> </span><span class="n">instantiateListeners</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="o">[</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">jdbc</span><span class="p">.</span><span class="na">SqlScriptsTestExecutionListener</span><span class="o">]</span><span class="p">.</span><span class="w"> </span><span class="n">Specify</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="nf">classes</span><span class="w"> </span><span class="p">(</span><span class="n">and</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">dependencies</span><span class="p">)</span><span class="w"> </span><span class="n">available</span><span class="p">.</span><span class="w"> </span><span class="n">Offending</span><span class="w"> </span><span class="kd">class</span><span class="err">:</span> <span class="err">[</span><span class="nc">org</span><span class="o">/</span><span class="n">springframework</span><span class="o">/</span><span class="n">transaction</span><span class="o">/</span><span class="n">interceptor</span><span class="o">/</span><span class="n">TransactionAttribute</span><span class="o">]</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">00</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DefaultTestContextBootstrapper</span><span class="w"> </span><span class="n">getTestExecutionListeners</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Using</span><span class="w"> </span><span class="n">TestExecutionListeners</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DependencyInjectionTestExecutionListener</span><span class="err">@</span><span class="mi">483</span><span class="n">bf400</span><span class="p">,</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">test</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">support</span><span class="p">.</span><span class="na">DirtiesContextTestExecutionListener</span><span class="err">@</span><span class="mi">21</span><span class="n">a06946</span><span class="o">]</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">  </span><span class="p">.</span><span class="w">   </span><span class="n">____</span><span class="w">          </span><span class="n">_</span><span class="w">            </span><span class="n">__</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w"> </span><span class="o">/</span><span class="err">\\</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">___</span><span class="err">&#39;</span><span class="n">_</span><span class="w"> </span><span class="n">__</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="nf">_</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="n">_</span><span class="w"> </span><span class="n">__</span><span class="w">  </span><span class="n">__</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="err">\</span><span class="n">___</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">&#39;</span><span class="n">_</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">&#39;</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">&#39;</span><span class="n">_</span><span class="w"> </span><span class="err">\</span><span class="o">/</span><span class="w"> </span><span class="n">_</span><span class="err">`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="err">\</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w"> </span><span class="err">\\</span><span class="o">/</span><span class="w">  </span><span class="n">___</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="p">)</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">  </span><span class="err">&#39;</span><span class="w">  </span><span class="o">|</span><span class="n">____</span><span class="o">|</span><span class="w"> </span><span class="p">.</span><span class="na">__</span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="err">\</span><span class="n">__</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="o">/</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w"> </span><span class="o">=========|</span><span class="n">_</span><span class="o">|==============|</span><span class="n">___</span><span class="o">/=/</span><span class="n">_</span><span class="o">/</span><span class="n">_</span><span class="o">/</span><span class="n">_</span><span class="o">/</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="p">::</span><span class="w">        </span><span class="p">(</span><span class="n">v1</span><span class="mf">.2.2</span><span class="p">.</span><span class="na">RELEASE</span><span class="p">)</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="o">[</span><span class="mi">2015</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">11</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mf">01.272</span><span class="o">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">11696</span><span class="w"> </span><span class="n">INFOS</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">eclipse</span><span class="p">.</span><span class="na">jdt</span><span class="p">.</span><span class="na">internal</span><span class="p">.</span><span class="na">junit</span><span class="p">.</span><span class="na">runner</span><span class="p">.</span><span class="na">RemoteTestRunner</span><span class="p">:</span><span class="w"> </span><span class="n">Starting</span><span class="w"> </span><span class="n">RemoteTestRunner</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">Gportpers3</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">PID</span><span class="w"> </span><span class="mi">11696</span><span class="w"> </span><span class="p">(</span><span class="n">started</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">ST</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">D</span><span class="p">:</span><span class="err">\</span><span class="n">data</span><span class="err">\</span><span class="n">istia</span><span class="o">-</span><span class="mi">1415</span><span class="err">\</span><span class="n">eclipse</span><span class="err">\</span><span class="n">intro</span><span class="o">-</span><span class="n">jdbc</span><span class="err">\</span><span class="n">elections</span><span class="o">-</span><span class="n">jdbc</span><span class="o">-</span><span class="mo">01</span><span class="p">)</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="o">[</span><span class="mi">2015</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">11</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mf">01.317</span><span class="o">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">11696</span><span class="w"> </span><span class="n">INFOS</span><span class="w"> </span><span class="o">[</span><span class="n">main</span><span class="o">]</span><span class="w"> </span><span class="o">---</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">annotation</span><span class="p">.</span><span class="na">AnnotationConfigApplicationContext</span><span class="p">:</span><span class="w"> </span><span class="n">Refreshing</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">annotation</span><span class="p">.</span><span class="na">AnnotationConfigApplicationContext</span><span class="err">@</span><span class="mi">74</span><span class="n">ad1f1f</span><span class="p">:</span><span class="w"> </span><span class="n">startup</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">[</span><span class="n">Wed</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">01</span><span class="w"> </span><span class="n">CET</span><span class="w"> </span><span class="mi">2015</span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">hierarchy</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="n">mars</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="mi">4</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">01</span><span class="w"> </span><span class="n">PM</span><span class="w"> </span><span class="n">org</span><span class="p">.</span><span class="na">eclipse</span><span class="p">.</span><span class="na">jdt</span><span class="p">.</span><span class="na">internal</span><span class="p">.</span><span class="na">junit</span><span class="p">.</span><span class="na">runner</span><span class="p">.</span><span class="na">RemoteTestRunner</span><span class="w"> </span><span class="n">logStarted</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="nl">INFOS</span><span class="p">:</span><span class="w"> </span><span class="n">Started</span><span class="w"> </span><span class="n">RemoteTestRunner</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="mf">0.775</span><span class="w"> </span><span class="n">seconds</span><span class="w"> </span><span class="p">(</span><span class="n">JVM</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mf">1.433</span><span class="p">)</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="n">testElections01</span><span class="o">-------------------------------------</span>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a><span class="n">Nombre</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">sièges</span><span class="w"> </span><span class="n">à</span><span class="w"> </span><span class="n">pourvoir</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="n">Seuil</span><span class="w"> </span><span class="n">électoral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="n">Listes</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="n">compétition</span><span class="w"> </span><span class="o">---------------------</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;A&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;B&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;D&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;E&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;F&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;G&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="n">Listes</span><span class="w"> </span><span class="n">en</span><span class="w"> </span><span class="n">compétition</span><span class="w"> </span><span class="o">---------------------</span>
<a id="__codelineno-19-36" name="__codelineno-19-36"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;A&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;B&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;D&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
<a id="__codelineno-19-40" name="__codelineno-19-40"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;E&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;F&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">}</span>
<a id="__codelineno-19-42" name="__codelineno-19-42"></a><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span><span class="s">&quot;nom&quot;</span><span class="p">:</span><span class="s">&quot;G&quot;</span><span class="p">,</span><span class="s">&quot;voix&quot;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="s">&quot;sieges&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s">&quot;elimine&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 1-23 : logs de Spring Test ;</li>
<li>lignes 25-26 : le contenu de la table [CONF] ;</li>
<li>lignes 27-34 : le contenu initial de la table [LISTES] ;</li>
<li>lignes 35-42 : le contenu de la table [LISTES] après affectation de valeurs aux champs [voix, sieges, elimine] ;
Par ailleurs le test JUnit réussit :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000015C000000CBF66E50FE.png" style="display:inline-block; margin:4px;width:6.44cm;height:3.761cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<h2 id="711-creation-de-larchive-with-dependencies-de-la-couche-dao">7.11. Création de l&#x27;archive [with-dependencies] de la couche [dao]</h2>
<p>Le projet final a l&#x27;architecture suivante :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000052200000109068314C5.png" style="display:inline-block; margin:4px;width:17.383cm;height:3.507cm;" /></td></tr></table>

<p>Rappelons la configuration Maven du projet :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span>
<span class="normal"><a href="#__codelineno-20-34">34</a></span>
<span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span>
<span class="normal"><a href="#__codelineno-20-47">47</a></span>
<span class="normal"><a href="#__codelineno-20-48">48</a></span>
<span class="normal"><a href="#__codelineno-20-49">49</a></span>
<span class="normal"><a href="#__codelineno-20-50">50</a></span>
<span class="normal"><a href="#__codelineno-20-51">51</a></span>
<span class="normal"><a href="#__codelineno-20-52">52</a></span>
<span class="normal"><a href="#__codelineno-20-53">53</a></span>
<span class="normal"><a href="#__codelineno-20-54">54</a></span>
<span class="normal"><a href="#__codelineno-20-55">55</a></span>
<span class="normal"><a href="#__codelineno-20-56">56</a></span>
<span class="normal"><a href="#__codelineno-20-57">57</a></span>
<span class="normal"><a href="#__codelineno-20-58">58</a></span>
<span class="normal"><a href="#__codelineno-20-59">59</a></span>
<span class="normal"><a href="#__codelineno-20-60">60</a></span>
<span class="normal"><a href="#__codelineno-20-61">61</a></span>
<span class="normal"><a href="#__codelineno-20-62">62</a></span>
<span class="normal"><a href="#__codelineno-20-63">63</a></span>
<span class="normal"><a href="#__codelineno-20-64">64</a></span>
<span class="normal"><a href="#__codelineno-20-65">65</a></span>
<span class="normal"><a href="#__codelineno-20-66">66</a></span>
<span class="normal"><a href="#__codelineno-20-67">67</a></span>
<span class="normal"><a href="#__codelineno-20-68">68</a></span>
<span class="normal"><a href="#__codelineno-20-69">69</a></span>
<span class="normal"><a href="#__codelineno-20-70">70</a></span>
<span class="normal"><a href="#__codelineno-20-71">71</a></span>
<span class="normal"><a href="#__codelineno-20-72">72</a></span>
<span class="normal"><a href="#__codelineno-20-73">73</a></span>
<span class="normal"><a href="#__codelineno-20-74">74</a></span>
<span class="normal"><a href="#__codelineno-20-75">75</a></span>
<span class="normal"><a href="#__codelineno-20-76">76</a></span>
<span class="normal"><a href="#__codelineno-20-77">77</a></span>
<span class="normal"><a href="#__codelineno-20-78">78</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="o">&lt;</span><span class="n">project</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">modelVersion</span><span class="o">&gt;</span><span class="mf">4.0.0</span><span class="o">&lt;/</span><span class="n">modelVersion</span><span class="o">&gt;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">istia</span><span class="p">.</span><span class="na">st</span><span class="p">.</span><span class="na">elections</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">elections</span><span class="o">-</span><span class="n">dao</span><span class="o">-</span><span class="n">jdbc</span><span class="o">-</span><span class="mo">01</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">parent</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.2.7</span><span class="p">.</span><span class="na">RELEASE</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">MySQL</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">mysql</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="n">java</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">context</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Tomcat</span><span class="w"> </span><span class="n">Jdbc</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">tomcat</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">tomcat</span><span class="o">-</span><span class="n">jdbc</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">bibliothèque</span><span class="w"> </span><span class="n">jSON</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="p">.</span><span class="na">fasterxml</span><span class="p">.</span><span class="na">jackson</span><span class="p">.</span><span class="na">core</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">jackson</span><span class="o">-</span><span class="n">databind</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
<a id="__codelineno-20-46" name="__codelineno-20-46"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-47" name="__codelineno-20-47"></a><span class="w">        </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">Spring</span><span class="w"> </span><span class="n">Boot</span><span class="w"> </span><span class="n">Logging</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-48" name="__codelineno-20-48"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-49" name="__codelineno-20-49"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-50" name="__codelineno-20-50"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">logging</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-51" name="__codelineno-20-51"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
<a id="__codelineno-20-52" name="__codelineno-20-52"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-20-53" name="__codelineno-20-53"></a>
<a id="__codelineno-20-54" name="__codelineno-20-54"></a><span class="w">    </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">plugins</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-55" name="__codelineno-20-55"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-20-56" name="__codelineno-20-56"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-20-57" name="__codelineno-20-57"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-20-58" name="__codelineno-20-58"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">assembly</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-59" name="__codelineno-20-59"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-20-60" name="__codelineno-20-60"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-20-61" name="__codelineno-20-61"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-20-62" name="__codelineno-20-62"></a><span class="w">                            </span><span class="o">&lt;</span><span class="n">mainClass</span><span class="o">&gt;</span><span class="n">config</span><span class="p">.</span><span class="na">AppConfig</span><span class="o">&lt;/</span><span class="n">mainClass</span><span class="o">&gt;</span>
<a id="__codelineno-20-63" name="__codelineno-20-63"></a><span class="w">                        </span><span class="o">&lt;/</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-20-64" name="__codelineno-20-64"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-20-65" name="__codelineno-20-65"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-20-66" name="__codelineno-20-66"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">descriptorRef</span><span class="o">&gt;</span><span class="n">jar</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">dependencies</span><span class="o">&lt;/</span><span class="n">descriptorRef</span><span class="o">&gt;</span>
<a id="__codelineno-20-67" name="__codelineno-20-67"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-20-68" name="__codelineno-20-68"></a><span class="w">                </span><span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-20-69" name="__codelineno-20-69"></a><span class="w">            </span><span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-20-70" name="__codelineno-20-70"></a><span class="w">            </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">pour</span><span class="w"> </span><span class="n">l</span><span class="err">&#39;</span><span class="n">installation</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">l</span><span class="err">&#39;</span><span class="n">artifact</span><span class="w"> </span><span class="n">du</span><span class="w"> </span><span class="n">projet</span><span class="w"> </span><span class="n">dans</span><span class="w"> </span><span class="n">le</span><span class="w"> </span><span class="n">dépôt</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">Maven</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-20-71" name="__codelineno-20-71"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-20-72" name="__codelineno-20-72"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">maven</span><span class="p">.</span><span class="na">plugins</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-20-73" name="__codelineno-20-73"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">surefire</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-20-74" name="__codelineno-20-74"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">2.18.1</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-20-75" name="__codelineno-20-75"></a><span class="w">            </span><span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-20-76" name="__codelineno-20-76"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-20-77" name="__codelineno-20-77"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-20-78" name="__codelineno-20-78"></a><span class="o">&lt;/</span><span class="n">project</span><span class="o">&gt;</span>
</code></pre></div></td></tr></table></div>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000110000001949B862F61.png" style="display:inline-block; margin:4px;width:5.611cm;height:8.334cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<p>Nous allons générer un unique jar qui contiendra les classes de tous les jars ci-dessus plus celles du projet de la couche [DAO]. Cela se fait à l&#x27;aide d&#x27;une modification dans le fichier [pom.xml] :</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span>
<span class="normal"><a href="#__codelineno-21-28">28</a></span>
<span class="normal"><a href="#__codelineno-21-29">29</a></span>
<span class="normal"><a href="#__codelineno-21-30">30</a></span>
<span class="normal"><a href="#__codelineno-21-31">31</a></span>
<span class="normal"><a href="#__codelineno-21-32">32</a></span>
<span class="normal"><a href="#__codelineno-21-33">33</a></span>
<span class="normal"><a href="#__codelineno-21-34">34</a></span>
<span class="normal"><a href="#__codelineno-21-35">35</a></span>
<span class="normal"><a href="#__codelineno-21-36">36</a></span>
<span class="normal"><a href="#__codelineno-21-37">37</a></span>
<span class="normal"><a href="#__codelineno-21-38">38</a></span>
<span class="normal"><a href="#__codelineno-21-39">39</a></span>
<span class="normal"><a href="#__codelineno-21-40">40</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="o">&lt;</span><span class="n">project</span><span class="w"> </span><span class="n">xmlns</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span class="w"> </span><span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="n">xsi</span><span class="p">:</span><span class="n">schemaLocation</span><span class="o">=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="o">&gt;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">modelVersion</span><span class="o">&gt;</span><span class="mf">4.0.0</span><span class="o">&lt;/</span><span class="n">modelVersion</span><span class="o">&gt;</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">istia</span><span class="p">.</span><span class="na">st</span><span class="p">.</span><span class="na">elections</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">elections</span><span class="o">-</span><span class="n">jdbc</span><span class="o">-</span><span class="mo">01</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="p">.</span><span class="na">boot</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">parent</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.2.2</span><span class="p">.</span><span class="na">RELEASE</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">parent</span><span class="o">&gt;</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">project</span><span class="p">.</span><span class="na">build</span><span class="p">.</span><span class="na">sourceEncoding</span><span class="o">&gt;</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="o">&lt;/</span><span class="n">project</span><span class="p">.</span><span class="na">build</span><span class="p">.</span><span class="na">sourceEncoding</span><span class="o">&gt;</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">java</span><span class="p">.</span><span class="na">version</span><span class="o">&gt;</span><span class="mf">1.8</span><span class="o">&lt;/</span><span class="n">java</span><span class="p">.</span><span class="na">version</span><span class="o">&gt;</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">        </span><span class="p">...</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">dependencies</span><span class="o">&gt;</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">    </span><span class="o">&lt;!--</span><span class="w"> </span><span class="n">plugins</span><span class="w"> </span><span class="o">--&gt;</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="w">    </span><span class="o">&lt;</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="w">        </span><span class="o">&lt;</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="w">            </span><span class="o">&lt;</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">maven</span><span class="o">-</span><span class="n">assembly</span><span class="o">-</span><span class="n">plugin</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
<a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="w">                </span><span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-21-29" name="__codelineno-21-29"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-21-30" name="__codelineno-21-30"></a><span class="w">                            </span><span class="o">&lt;</span><span class="n">mainClass</span><span class="o">&gt;</span><span class="n">console</span><span class="p">.</span><span class="na">Main</span><span class="o">&lt;/</span><span class="n">mainClass</span><span class="o">&gt;</span>
<a id="__codelineno-21-31" name="__codelineno-21-31"></a><span class="w">                        </span><span class="o">&lt;/</span><span class="n">manifest</span><span class="o">&gt;</span>
<a id="__codelineno-21-32" name="__codelineno-21-32"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">archive</span><span class="o">&gt;</span>
<a id="__codelineno-21-33" name="__codelineno-21-33"></a><span class="w">                    </span><span class="o">&lt;</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-21-34" name="__codelineno-21-34"></a><span class="w">                        </span><span class="o">&lt;</span><span class="n">descriptorRef</span><span class="o">&gt;</span><span class="n">jar</span><span class="o">-</span><span class="n">with</span><span class="o">-</span><span class="n">dependencies</span><span class="o">&lt;/</span><span class="n">descriptorRef</span><span class="o">&gt;</span>
<a id="__codelineno-21-35" name="__codelineno-21-35"></a><span class="w">                    </span><span class="o">&lt;/</span><span class="n">descriptorRefs</span><span class="o">&gt;</span>
<a id="__codelineno-21-36" name="__codelineno-21-36"></a><span class="w">                </span><span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
<a id="__codelineno-21-37" name="__codelineno-21-37"></a><span class="w">            </span><span class="o">&lt;/</span><span class="n">plugin</span><span class="o">&gt;</span>
<a id="__codelineno-21-38" name="__codelineno-21-38"></a><span class="w">        </span><span class="o">&lt;/</span><span class="n">plugins</span><span class="o">&gt;</span>
<a id="__codelineno-21-39" name="__codelineno-21-39"></a><span class="w">    </span><span class="o">&lt;/</span><span class="n">build</span><span class="o">&gt;</span>
<a id="__codelineno-21-40" name="__codelineno-21-40"></a><span class="o">&lt;/</span><span class="n">project</span><span class="o">&gt;</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>lignes 25-37 : configurent un plugin Maven pour générer le jar ;</li>
<li>ligne 15 : indique la version de Java à utiliser pour la compilation ;
Une fois cette modification faite, on peut générer le jar de la façon suivante [1-10] :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004E5000002EDF261F0B0.png" style="display:inline-block; margin:4px;width:16.577cm;height:9.91cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000003DF00000141E7C0DBB7.png" style="display:inline-block; margin:4px;width:13.111cm;height:4.247cm;" /></td></tr></table>

<ul>
<li>en [5], mettre le dossier du projet en utilisant le bouton [6] ;</li>
<li>en [7], donner un nom à la configuration d&#x27;exécution ;</li>
<li>en [8], mettre la liste des buts Maven à exécuter :</li>
<li>[clean] : vide le dossier [target] du projet dans lequel va être placé le jar généré ;</li>
<li>[compile] : compile le projet ;</li>
<li>[assembly:single] : génère un unique jar comprenant toutes les classes du projet et de ses dépendances ;</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004640000016A4EBC4A4F.png" style="display:inline-block; margin:4px;width:14.87cm;height:4.789cm;" /></td></tr></table>

<ul>
<li>en [9-10], vérifiez que vous avez un <strong>JDK</strong> (Java Development Kit) et non un <strong>JRE</strong> (Java Runtime Environment). La différence est que le JDK a un compilateur et pas le JRE. Si vous n&#x27;avez pas un JDK, il vous faut en ajouter un dans [10] avec [11]. Pour cela, suivre la procédure décrite au paragraphe 3.1, page 16 ;</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004F2000000EE9C7D9767.png" style="display:inline-block; margin:4px;width:16.748cm;height:3.149cm;" /></td></tr></table>

<ul>
<li>en [17], exécutez la configuration d&#x27;exécution ;</li>
<li>en [13], l&#x27;archive générée ;
On peut ouvrir cette archive avec un dézippeur :</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/100000000000013500000180C2689868.png" style="display:inline-block; margin:4px;width:5.72cm;height:7.11cm;" /></td><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;">&nbsp;</td></tr></table>

<h2 id="712-test-de-larchive-de-la-couche-dao">7.12. Test de l&#x27;archive de la couche [DAO]</h2>
<p>Créons un projet Eclipse standard (pas Maven) [1] :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000002D5000000BFFAF27BA0.png" style="display:inline-block; margin:4px;width:9.592cm;height:2.528cm;" /></td></tr></table>

<p>Faisons un copier / coller du package [dao.console] du projet [elections-dao-jdbc-01] dans le projet [elections-dao-jdbc-02] [2]. De nombreuses erreurs apparaissent car la classe [Main] référence des classes qui ne sont pas dans son [Classpath]. Nous allons modifier celui-ci.</p>
<p>Nous créons tout d&#x27;abord [2-8] un dossier [lib] dans le nouveau projet :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000005AF0000028393526CB7.png" style="display:inline-block; margin:4px;width:17.999cm;height:7.953cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004B9000001363273150F.png" style="display:inline-block; margin:4px;width:15.995cm;height:4.101cm;" /></td></tr></table>

<p>En [9], nous mettons l&#x27;archive créée à l&#x27;étape précédente dans le dossier [lib] puis nous modifions le Build Path du projet :</p>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000446000001E12F4F0629.png" style="display:inline-block; margin:4px;width:14.473cm;height:6.364cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/10000000000004690000016F69FAE278.png" style="display:inline-block; margin:4px;width:14.937cm;height:4.856cm;" /></td></tr></table>

<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000590000002ABEFCC8920.png" style="display:inline-block; margin:4px;width:17.999cm;height:8.632cm;" /></td></tr></table>

<ul>
<li>en [18], on a importé l&#x27;archive de la couche [DAO] créée précédemment ;</li>
</ul>
<table class="odt-table" style="border-collapse: collapse; width: 100%; margin-bottom: 1em;"><tr><td style="border: 1px solid #ddd; padding: 8px; vertical-align: top;"><img src="images/1000000000000307000000DBE24C6827.png" style="display:inline-block; margin:4px;width:10.253cm;height:2.898cm;" /></td></tr></table>

<ul>
<li>en [19], le projet ne présente plus d&#x27;erreurs ;
On peut alors exécuter la classe [Main]. On obtient les mêmes résultats que précédemment.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner">

      <div>
        <a href="https://tahe.developpez.com" target="_blank">
          https://tahe.developpez.com
        </a>
        <br>
        Ce cours tutoriel écrit par <strong>Serge Tahé</strong> est mis à disposition du public selon les termes de la
        <em>Licence Creative Commons Attribution – Pas d’Utilisation Commerciale –
        Partage dans les Mêmes Conditions 3.0 non transposé</em>.
      </div>

    </div>
  </div>

      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["navigation.sections", "navigation.indexes", "toc.integrate", "navigation.top"], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="javascripts/focus.js"></script>
      
    
  </body>
</html>